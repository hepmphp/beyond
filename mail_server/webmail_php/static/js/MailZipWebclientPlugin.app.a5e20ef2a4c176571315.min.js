"use strict";(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[439],{NAax:(i,e,n)=>{i.exports=function(i){const e=n("9kOp");if(i.MailZipWebclientPlugin&&i.MailZipWebclientPlugin.AllowZip&&e.isUserNormalOrTenant()){const i=n("D5cQ");return{start:function(n){e.subscribeEvent("MailWebclient::CopyFileProperties::after",(function(e){e&&i.copyProperties(e)})),e.subscribeEvent("MailWebclient::ParseFile::after",(function(e){i.parse(e)})),e.subscribeEvent("MailWebclient::AddAllAttachmentsDownloadMethod",(function(e){e(i.getAllAttachmentsDownloadMethod())}))}}}return null}},D5cQ:(i,e,n)=>{const t=n("p09A"),s=n("H20a"),l=n("Tt1R"),a=n("EFhx"),o=n("/QeJ"),d=n("skxT");function u(i){return{Text:t.computed((function(){return this.subFilesExpanded()?s.i18n("COREWEBCLIENT/ACTION_COLLAPSE_FILE"):this.mailzipSubFilesLoading()?s.i18n("COREWEBCLIENT/INFO_LOADING"):s.i18n("COREWEBCLIENT/ACTION_EXPAND_FILE")}),i),Handler:function(){this.mailzipSubFilesLoading()||(this.subFilesExpanded()?this.subFilesExpanded(!1):this.mailzipExpandFile())}.bind(i)}}i.exports={parse(i){i&&"function"==typeof i.addAction&&"zip"===i.extension()&&(i.mailzipSubFilesLoaded=t.observable(!1),i.mailzipSubFilesLoading=t.observable(!1),i.mailzipExpandFile=function(){this.mailzipSubFilesLoaded()||this.mailzipSubFilesLoading()?this.subFilesExpanded(!0):(this.mailzipSubFilesLoading(!0),a.send("MailZipWebclientPlugin","ExpandFile",{Hash:this.hash()},(function(e){this.mailzipSubFilesLoading(!1);const n=e.Result&&Array.isArray(e.Result.Files)?e.Result.Files:[],t=[];n.forEach((e=>{const n=i.getNewInstance();n.parse(e),t.push(n)})),this.subFiles(t),this.mailzipSubFilesLoaded(!0),this.subFilesExpanded(!0)}),this))},i.removeAction("view"),i.addAction("expand",!0,u(i)))},copyProperties({file:i,source:e}){i&&"function"==typeof i.addAction&&"zip"===i.extension()&&(i.mailzipSubFilesLoaded=t.observable(e.mailzipSubFilesLoaded()),i.mailzipSubFilesLoading=t.observable(e.mailzipSubFilesLoading()),i.mailzipExpandFile=e.mailzipExpandFile.bind(i),i.removeAction("expand"),i.addAction("expand",!0,u(i)))},getAllAttachmentsDownloadMethod:()=>({Text:s.i18n("MAILZIPWEBCLIENTPLUGIN/ACTION_DOWNLOAD_ATTACHMENTS_ZIP"),Handler:function(i,e){d.showLoading(s.i18n("COREWEBCLIENT/INFO_LOADING")),a.send("MailZipWebclientPlugin","SaveAttachments",{AccountID:i,Attachments:e},(function(i){if(d.hideLoading(),i.Result&&i.Result.Actions&&i.Result.Actions.download){var e=i.Result.Actions.download.url;l.downloadByUrl(e)}else o.showErrorByCode(i)}))}})}}}]);