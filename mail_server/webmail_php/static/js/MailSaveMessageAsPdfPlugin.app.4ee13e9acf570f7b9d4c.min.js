"use strict";(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[637],{rdRX:(t,e,a)=>{t.exports=function(t){var e=a("M4cL"),n=a("H20a"),s=a("Tt1R"),r=a("EFhx"),i=a("/QeJ"),o=a("9kOp");return o.isUserNormalOrTenant()?{start:function(t){o.subscribeEvent("MailWebclient::AddMoreSectionCommand",(function(t){t({Text:n.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ACTION_DOWNLOAD_PDF"),CssClass:"pdf",Handler:function(){if(this.currentMessage()){var t=this.currentMessage().getDomText();e("img[data-x-src-cid]",t).each((function(){!function(t){try{var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),t.src=e.toDataURL("image/png")}catch(t){}}(this)})),r.send("MailSaveMessageAsPdfPlugin","GeneratePdfFile",{FileName:this.subject(),Html:t.html()},(function(t){t.Result&&t.Result.Actions&&t.Result.Actions.download?s.downloadByUrl(t.Result.Actions.download.url):i.showErrorByCode(t,n.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ERROR_CREATING_PDF"))}),this)}}})}))}}:null}}}]);