"use strict";(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[422],{GU2j:(e,t,r)=>{var o=r("a7T2"),s=r("p09A"),n=r("KC/L"),i=r("9kOp");e.exports={ServerModuleName:"OAuthIntegratorWebclient",HashModuleName:"oauth-integrator",AuthModuleName:"StandardAuth",OnlyPasswordForAccountCreate:!0,userAccountsCount:s.observable(0),Services:[],init:function(e){var t=e.OAuthIntegratorWebclient;o.isEmpty(t)||(this.AuthModuleName=n.pString(t.AuthModuleName,this.AuthModuleName),this.OnlyPasswordForAccountCreate=n.pBool(t.OnlyPasswordForAccountCreate,this.OnlyPasswordForAccountCreate),this.Services=n.pArray(t.Services,this.Services)),i.registerUserAccountsCount(this.userAccountsCount)},updateAdmin:function(e){o.each(this.Services,(function(t){var r=e[t.Name];r&&(t.EnableModule=r.EnableModule,t.Id=r.Id,t.Secret=r.Secret)}))}}},Le8M:(e,t,r)=>{e.exports=function(e){var t=r("a7T2"),o=r("M4cL"),s=r("p09A"),n=r("W66n"),i=r("EFhx"),a=r("9kOp"),u=r("GU2j"),c=a.getUserRole()===Enums.UserRole.Anonymous;return u.init(e),c?{start:function(e){u.oauthServices=s.observableArray([]);var t=function(e){var t;"CLoginView"!==e.Name&&"CRegisterView"!==e.Name||((t=n.getCurrentHashArray()).length>=2&&t[0]===u.RegisterModuleHash&&t[1],e.View.externalAuthClick=function(t){o.cookie("oauth-redirect","CLoginView"===e.Name?"login":"register"),o.cookie("oauth-scopes","auth"),window.location.href="?oauth="+t},e.View.oauthServices=u.oauthServices)};i.send(u.ServerModuleName,"GetServices",null,(function(e){u.oauthServices(e.Result)}),this),a.subscribeEvent("StandardLoginFormWebclient::ConstructView::after",t),a.subscribeEvent("StandardRegisterFormWebclient::ConstructView::after",t)}}:a.isUserNormalOrTenant()?{start:function(e){var r=function(){i.send(u.ServerModuleName,"GetAccounts",null,(function(e){var r=0;t.isArray(e.Result)&&t.each(e.Result,(function(e){-1!==e.Scopes.indexOf("auth")&&r++})),u.userAccountsCount(r)}))};a.subscribeEvent("OAuthAccountChange::after",(function(){r()})),r()},getCreateLoginPasswordView:function(){return r("Ac5m")}}:null}},Ac5m:(e,t,r)=>{var o=r("M4cL"),s=r("p09A"),n=r("H20a"),i=r("KC/L"),a=r("skxT"),u=r("9kOp"),c=r("GU2j");function l(){this.visible=s.computed((function(){return c.OnlyPasswordForAccountCreate&&!i.isNonEmptyString(u.firstAccountWithPassLogin())})),this.password=s.observable(""),this.passwordFocus=s.observable(!1),this.confirmPassword=s.observable(""),this.confirmPasswordFocus=s.observable(!1),this.login=s.computed((function(){return u.getUserPublicId()}),this)}l.prototype.ViewTemplate="OAuthIntegratorWebclient_CreateLoginPasswordView",l.prototype.setPassword=function(){var e=o.trim(this.login()),t=o.trim(this.password()),r=o.trim(this.confirmPassword());if(""!==t)return t!==r?(a.showError(n.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),void this.confirmPasswordFocus(!0)):void u.broadcastEvent(c.AuthModuleName+"::CreateUserAuthAccount",{Login:e,Password:t});this.passwordFocus(!0)},e.exports=new l}}]);