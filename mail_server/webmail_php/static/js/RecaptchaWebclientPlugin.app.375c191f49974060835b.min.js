"use strict";(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[48],{clgM:(t,e,i)=>{var o=i("a7T2"),a=i("KC/L");t.exports={ModuleName:"RecaptchaWebclientPlugin",PublicKey:"",LimitCount:0,ShowRecaptcha:!0,init:function(t){var e=t[this.ModuleName]||{};o.isEmpty(e)||(this.PublicKey=a.pString(e.PublicKey,this.PublicKey),this.LimitCount=a.pInt(e.LimitCount,this.LimitCount),this.ShowRecaptcha=a.pBool(e.ShowRecaptcha,this.ShowRecaptcha))}}},XVuw:(t,e,i)=>{t.exports=function(t){var e=i("a7T2"),o=i("9kOp"),a=i("clgM");return a.init(t),o.getUserRole()===Enums.UserRole.Anonymous?{start:function(t){if(a.ShowRecaptcha){var r=i("ls75");o.subscribeEvent("AnonymousUserForm::PopulateBeforeButtonsControllers",e.bind((function(t){if(e.isFunction(t.RegisterBeforeButtonsController)){const e=["StandardLoginFormWebclient","MailLoginFormWebclient"];t.RegisterBeforeButtonsController(new r(t.ModuleName,e.includes(t.ModuleName)))}}),this))}}}:null}},ls75:(t,e,i)=>{var o=i("a7T2"),a=i("M4cL"),r=i("p09A"),c=i("9kOp"),s=i("clgM");function n(t,e){this.sModuleName=t,this.bShown=!1,this.recaptchaPlace=r.observable(null),this.recaptchaPlace.subscribe((function(){this.ShowRecaptcha()}),this),this.iAuthErrorCount=r.observable(0),this.bShowRecaptcha=r.observable(!0),e&&(this.iAuthErrorCount(a.cookie("auth-error")||0),this.iLimitCount=s?s.LimitCount:0,this.iAuthErrorCount()<this.iLimitCount&&this.bShowRecaptcha(!1),c.subscribeEvent("ReceiveAjaxResponse::after",o.bind((function(t){"StandardLoginFormWebclient"!==t.Request.Module&&"MailLoginFormWebclient"!==t.Request.Module||"Login"!==t.Request.Method||!1!==t.Response.Result||(this.iAuthErrorCount(a.cookie("auth-error")||0),this.iAuthErrorCount()>=this.iLimitCount&&(this.bShowRecaptcha()?window.grecaptcha.reset(this.widgetId):this.bShowRecaptcha(!0)))}),this))),c.subscribeEvent("AnonymousUserForm::PopulateFormSubmitParameters",o.bind((function(e){if(e.Module===t&&e.Parameters){var i=this.getParametersForSubmit();o.extend(e.Parameters,i)}}),this)),window.grecaptcha?this.ShowRecaptcha():(window["ShowRecaptcha"+t]=this.ShowRecaptcha.bind(this),a.getScript("https://www.google.com/recaptcha/api.js?onload=ShowRecaptcha"+t+"&render=explicit"))}n.prototype.ViewTemplate="RecaptchaWebclientPlugin_MainView",n.prototype.ShowRecaptcha=function(){if(window.grecaptcha&&this.recaptchaPlace()){if(this.bShown)window.grecaptcha.reset(this.widgetId);else{var t=s?s.PublicKey:"";""===t&&(t="wrong-key"),this.recaptchaPlace().append('<div id="recaptcha-place-'+this.sModuleName+'"></div>'),this.widgetId=window.grecaptcha.render("recaptcha-place-"+this.sModuleName,{sitekey:t})}this.bShown=!0}},n.prototype.getParametersForSubmit=function(){var t={};return t[s.ModuleName+"Token"]=window.grecaptcha.getResponse(this.widgetId),t},t.exports=n}}]);