(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[53],{qBBW:(t,e,n)=>{"use strict";var o=n("M4cL"),i=n("a7T2"),r=n("p09A"),a=n("l6qN"),l=n("H20a"),s=n("KC/L"),u=n("9kOp"),p=n("OfVV"),d=n("oUN1"),c=n("hT1I"),f=p.MultipleFilesUploadLimit;function m(t){return void 0===t}function h(t){0<t&&clearTimeout(t),t=0}function D(t){return(t=t&&(t.originalEvent?t.originalEvent:t)||window.event).dataTransfer?t:null}function v(t,e,n){return t&&e&&!m(t[e])?t[e]:n}function g(t,e,n){t[e]=n}function E(){return"jua-uid-"+function(t){var e="";for(t=m(t)?32:s.pInt(t);e.length<t;)e+="0123456789abcdefghijklmnopqrstuvwxyz".substr(Math.round(36*Math.random()),1);return e}(16)+"-"+(new Date).getTime().toString()}function y(t,e){return{FileName:m(t.fileName)?m(t.name)?null:t.name:t.fileName,Size:m(t.fileSize)?m(t.size)?null:t.size:t.fileSize,Type:m(t.type)?null:t.type,Folder:m(e)?"":e,File:t}}function b(t,e,n,o,i,r,a){var l=0,u=0,p=0,d=null,c=null,h=!1,D=!1,v=function(t,e,n,u){if(t&&!m(t.name))if(e=e||"",t.isFile)t.file((function(t){!h||0<=--r?n(y(t,e)):h&&!D&&0>r&&a&&(D=!0,a(l))}));else if(o&&t.isDirectory&&t.createReader){var p=t.createReader(),d=0,c=0;p&&p.readEntries&&p.readEntries((function(o){if(o&&s.isNonEmptyArray(o))for(d=0,c=o.length;d<c;d++)v(o[d],e+t.name+"/",n,u);else i(t)}))}};if(o=!!m(o)||!!o,n=!m(n)&&!!n,r=m(r)?f:s.pInt(r),l=r,h=0<r,t=t&&0<t.length?t:null)for(p=0,u=t.length;p<u;p++)(d=t[p])&&(n?"file"===d.kind&&d.webkitGetAsEntry&&(c=d.webkitGetAsEntry())&&v(c,"",e,a):!h||0<=--r?e(y(d)):h&&!D&&0>r&&a&&(D=!0,a(l)))}function T(t,e,n,o){var i=t&&t.files&&0<t.files.length?t.files:null;i?b(i,e,!1,!1,(()=>{}),n,o):e({FileName:t.value.split("\\").pop().split("/").pop(),Size:null,Type:null,Folder:"",File:null})}function F(t){var e=!1;if(t&&t.dataTransfer&&t.dataTransfer.types&&t.dataTransfer.types.length)for(var n=0,o=t.dataTransfer.types.length;n<o;n++)if("files"===t.dataTransfer.types[n].toLowerCase()){e=!0;break}return e}function O(){return o('<label style="position: absolute; background-color:#fff; right: 0px; top: 0px; left: 0px; bottom: 0px; margin: 0px; padding: 0px; cursor: pointer;"></label>').css({opacity:0})}function S(t,e,n,i){t=m(t)?"":t.toString();var r=function(t,e){return""!==e&&(e=' accept="'+e+'"'),o('<input type="file" tabindex="-1" hidefocus="hidefocus" style="position: absolute; '+t+': -9999px;"'+e+" />")}(n=m(n)?"left":n.toString(),i=m(i)?"":i.toString());return 0<t.length&&r.attr("name",t),(m(e)||e)&&r.prop("multiple",!0),r}function A(t,e){return s.pString(i.isFunction(t)?t.apply(null,i.isArray(e)?e:[]):t)}function M(t,e){this.oXhrs={},this.oUids={},this.oJua=t,this.oOptions=e}function U(t,e){this.oUids={},this.oForms={},this.oJua=t,this.oOptions=e}function w(t){t=m(t)?{}:t;var e=this;e.bEnableDnD=!0,e.bEnableButton=!0,e.oEvents={onDialog:null,onSelect:null,onStart:null,onComplete:null,onCompleteAll:null,onProgress:null,onDragEnter:null,onDragLeave:null,onDrop:null,onEmptyFolderDrop:null,onBodyDragEnter:null,onBodyDragLeave:null,onLimitReached:function(){d.showPopup(c,[l.i18n("COREWEBCLIENT/ERROR_UPLOAD_NUMBER_LIMIT_PLURAL",{NUMBERLIMIT:f},null,f)])}},e.oOptions=i.extend({action:"",name:"",hidden:{},queueSize:10,clickElement:!1,dragAndDropElement:!1,dragAndDropBodyElement:!1,disableAjaxUpload:!1,disableFolderDragAndDrop:!0,disableDragAndDrop:!1,disableMultiple:!1,disableDocumentDropPrevent:!1,disableAutoUploadOnDrop:!1,multipleSizeLimit:f,hiddenElementsPosition:"left"},t),e.oQueue=a(s.pInt(v(e.oOptions,"queueSize",10))),e.runEvent("onCompleteAll")&&e.oQueue.await((function(){e.runEvent("onCompleteAll")})),e.oDriver=e.isAjaxUploaderSupported()&&!v(e.oOptions,"disableAjaxUpload",!1)?new M(e,e.oOptions):new U(e,e.oOptions),e.oClickElement=v(e.oOptions,"clickElement",null),e.oClickElement&&(o(e.oClickElement).css({position:"relative",overflow:"hidden"}),"inline"===o(this.oClickElement).css("display")&&o(this.oClickElement).css("display","inline-block"),this.oDriver.generateNewInput(this.oClickElement)),this.oDriver.isDragAndDropSupported()&&v(this.oOptions,"dragAndDropElement",!1)&&!v(this.oOptions,"disableAjaxUpload",!1)?function(t){var e=o(document),n=o(v(t.oOptions,"dragAndDropBodyElement",!1)||e),i=v(t.oOptions,"dragAndDropElement",!1);i&&(v(t.oOptions,"disableDocumentDropPrevent",!1)||e.on("dragover",(function(e){if(t.bEnableDnD&&e&&(e=D(e))&&e.dataTransfer&&F(e))try{e.dataTransfer.dropEffect="none",e.preventDefault()}catch(t){}})),n&&n[0]&&n.on("dragover",(function(e){t.bEnableDnD&&e&&h(t.iDocTimer)})).on("dragenter",(function(e){t.bEnableDnD&&e&&(e=D(e))&&F(e)&&(h(t.iDocTimer),e.preventDefault(),t.runEvent("onBodyDragEnter",[e]))})).on("dragleave",(function(e){t.bEnableDnD&&e&&(e=D(e))&&(h(t.iDocTimer),t.iDocTimer=setTimeout((function(){t.runEvent("onBodyDragLeave",[e])}),200))})).on("drop",(function(e){if(t.bEnableDnD&&e&&(e=D(e))){var n=F(e);return n&&e.preventDefault(),t.runEvent("onBodyDragLeave",[e]),!n}return!1})),o(i).bind("dragenter",(function(e){t.bEnableDnD&&e&&(e=D(e))&&F(e)&&(h(t.iDocTimer),e.preventDefault(),t.runEvent("onDragEnter",[i,e]))})).bind("dragover",(function(e){if(t.bEnableDnD&&e&&(e=D(e))&&e.dataTransfer&&F(e))try{var o=e.dataTransfer.effectAllowed;h(t.iDocTimer),e.dataTransfer.dropEffect="move"===o||"linkMove"===o?"move":"copy",e.stopPropagation(),e.preventDefault(),n.trigger("dragover",e)}catch(t){}})).bind("dragleave",(function(e){if(t.bEnableDnD&&e){if(e=D(e)){var n=document.elementFromPoint?document.elementFromPoint(e.clientX,e.clientY):null;if(n&&(r=n,a=!1,(o=this)&&r&&(a=o===r||(o.contains?o.contains(r):!!r.compareDocumentPosition&&!!(8&r.compareDocumentPosition(o)))),a))return;h(t.iDocTimer),t.runEvent("onDragLeave",[i,e])}}else var o,r,a})).bind("drop",(function(e){t.bEnableDnD&&e&&(e=D(e))&&F(e)&&(e.preventDefault(),function(t,e,n,o,i,r){var a=null,l=null;(t=D(t))&&((a=(t.dataTransfer?v(t.dataTransfer,"items",null):null)||v(t,"items",null))&&0<a.length&&a[0]&&a[0].webkitGetAsEntry?b(a,e,!0,r,n,o,i):F(t)&&(l=v(t,"files",null)||(t.dataTransfer?v(t.dataTransfer,"files",null):null))&&0<l.length&&b(l,e,!1,!1,n,o,i))}(e,(function(n){n&&(v(t.oOptions,"disableAutoUploadOnDrop",!1)?t.runEvent("onDrop",[n,e,function(){t.addNewFile(n),h(t.iDocTimer)}]):(t.runEvent("onDrop",[n,e]),t.addNewFile(n),h(t.iDocTimer)))}),t.getEvent("onEmptyFolderDrop"),v(t.oOptions,"multipleSizeLimit",f),t.getEvent("onLimitReached"),!v(t.oOptions,"disableFolderDragAndDrop",!0))),t.runEvent("onDragLeave",[e])})))}(e):e.bEnableDnD=!1,g(e,"on",e.on),g(e,"cancel",e.cancel),g(e,"isDragAndDropSupported",e.isDragAndDropSupported),g(e,"isAjaxUploaderSupported",e.isAjaxUploaderSupported),g(e,"setDragAndDropEnabledStatus",e.setDragAndDropEnabledStatus)}M.prototype.oXhrs={},M.prototype.oUids={},M.prototype.oJua=null,M.prototype.oOptions={},M.prototype.isDragAndDropSupported=function(){return!0},M.prototype.regTaskUid=function(t){this.oUids[t]=!0},M.prototype.uploadTask=function(t,e,n,r,a,l,s){if(!1===this.oUids[t]||!e||!e.File)return r(null,t),!1;try{var p=this,d=new XMLHttpRequest,c=new FormData,f=v(this.oOptions,"action",""),h=i.clone(v(this.oOptions,"hidden",{})),D=this.oJua.getEvent("onStart"),g=this.oJua.getEvent("onComplete"),E=this.oJua.getEvent("onProgress");return d.open("POST",f,!0),d.setRequestHeader("Authorization","Bearer "+o.cookie("AuthToken")),d.setRequestHeader("X-Client","WebClient"),d.setRequestHeader("X-DeviceId",u.getCurrentDeviceId()),E&&d.upload&&(d.upload.onprogress=function(n){n&&n.lengthComputable&&!m(n.loaded)&&!m(n.total)&&(void 0===s?E(t,n.loaded,n.total):E(t,s+n.loaded>e.Size?e.Size:s+n.loaded,e.Size))}),d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){if(g&&!a){var e=!1,n=null;try{n=o.parseJSON(d.responseText),e=!0}catch(t){n=null}g(t,e,n)}m(p.oXhrs[t])||(p.oXhrs[t]=null),r(l?d.responseText:null,t)}else 4===d.readyState&&(g(t,!1,null),r(null,t))},D&&D(t),c.append("jua-post-type","ajax"),c.append(v(this.oOptions,"name","juaFile"),e.File,e.FileName),n=i.extend(n,e.Hidden||{}),h.Parameters=JSON.stringify(n),o.each(h,(function(t,n){c.append(t,A(n,[e]))})),d.send(c),this.oXhrs[t]=d,!0}catch(t){window.console&&window.console.error(t)}return r(null,t),!1},M.prototype.generateNewInput=function(t){var e=this,n=null,i=null;t&&(i=S("",!v(this.oOptions,"disableMultiple",!1),v(this.oOptions,"hiddenElementsPosition","left"),v(this.oOptions,"accept","")),(n=O()).append(i),o(t).append(n),i.on("click",(function(t){if(e.oJua.bEnableButton){var n=e.oJua.getEvent("onDialog");n&&n()}else t.preventDefault()})).on("change",(function(){T(this,(function(o){e.oJua.addNewFile(o),e.generateNewInput(t),setTimeout((function(){n.remove()}),10)}),v(e.oOptions,"multipleSizeLimit",f),e.oJua.getEvent("onLimitReached"))})))},M.prototype.cancel=function(t){if(this.oUids[t]=!1,this.oXhrs[t]){try{this.oXhrs[t].abort&&this.oXhrs[t].abort()}catch(t){}this.oXhrs[t]=null}},U.prototype.oUids={},U.prototype.oForms={},U.prototype.oJua=null,U.prototype.oOptions={},U.prototype.isDragAndDropSupported=function(){return!1},U.prototype.regTaskUid=function(t){this.oUids[t]=!0},U.prototype.uploadTask=function(t,e,n,r,a,l,s){if(!1===this.oUids[t])return r(null,t),!1;var u=this.oForms[t],p=i.clone(v(this.oOptions,"hidden",{})),d=this.oJua.getEvent("onStart"),c=this.oJua.getEvent("onComplete");return u?(u.append(o('<input type="hidden" />').attr("name","jua-post-type").val("iframe")),n=i.extend(n,e.Hidden||{}),p.Parameters=JSON.stringify(n),o.each(p,(function(t,n){u.append(o('<input type="hidden" />').attr("name",t).val(A(n,[e])))})),u.trigger("submit"),d&&d(t),u.find("iframe").on("load",(function(e){var n=!1,i=null,a={};if(c){try{i=this.contentDocument?this.contentDocument:this.contentWindow.document,a=o.parseJSON(i.body.innerHTML),n=!0}catch(t){a={}}c(t,n,a)}r(null,t),window.setTimeout((function(){u.remove()}),100)}))):r(null,t),!0},U.prototype.generateNewInput=function(t){var e=this,n="",i=null,r=null,a=v(this.oOptions,"action",""),l=null,s=v(this.oOptions,"hiddenElementsPosition","left");t&&(n=E(),i=S(v(this.oOptions,"name","juaFile"),!v(this.oOptions,"disableMultiple",!1),v(this.oOptions,"hiddenElementsPosition","left"),v(this.oOptions,"accept","")),l=o('<form action="'+a+'" target="iframe-'+n+'"  method="POST" enctype="multipart/form-data" style="display: block; cursor: pointer;"></form>'),r=o('<iframe name="iframe-'+n+'" tabindex="-1" src="javascript:void(0);"  style="position: absolute; top: -1000px; '+s+': -1000px; cursor: pointer;" />').css({opacity:0}),l.append(O().append(i)).append(r),o(t).append(l),this.oForms[n]=l,i.on("click",(function(t){if(e.oJua.bEnableButton){var n=e.oJua.getEvent("onDialog");n&&n()}else t.preventDefault()})).on("change",(function(){T(this,(function(o){if(o){var i=v(e.oOptions,"hiddenElementsPosition","left");l.css({position:"absolute",top:-1e3}),l.css(i,-1e3),e.oJua.addFile(n,o),e.generateNewInput(t)}}),v(e.oOptions,"multipleSizeLimit",f),e.oJua.getEvent("onLimitReached"))})))},U.prototype.cancel=function(t){this.oUids[t]=!1,this.oForms[t]&&(this.oForms[t].remove(),this.oForms[t]=!1)},w.prototype.bEnableDnD=!0,w.prototype.iDocTimer=0,w.prototype.oOptions={},w.prototype.oEvents={},w.prototype.oQueue=null,w.prototype.oDriver=null,w.prototype.on=function(t,e){return this.oEvents[t]=e,this},w.prototype.runEvent=function(t,e){this.oEvents[t]&&this.oEvents[t].apply(null,e||[])},w.prototype.getEvent=function(t){return this.oEvents[t]||null},w.prototype.cancel=function(t){this.oDriver.cancel(t)},w.prototype.isAjaxUploaderSupported=function(){return(t=document.createElement("input")).type="file",!!("XMLHttpRequest"in window&&"multiple"in t&&"FormData"in window&&(new XMLHttpRequest).upload);var t},w.prototype.setDragAndDropEnabledStatus=function(t){this.bEnableDnD=!!t},w.prototype.isDragAndDropSupported=function(){return this.oDriver.isDragAndDropSupported()},w.prototype.addNewFile=function(t){this.addFile(E(),t)},w.prototype.addFile=function(t,e){var n=this.getEvent("onSelect"),a=null,l=v(this.oOptions,"hidden",{}),s=this.getEvent("onComplete"),p=i.bind((function(t,e){var n,o,i=v(this.oOptions,"hidden",{}),r=JSON.parse(A(i.Parameters,[e]));this.oDriver.regTaskUid(t),this.oQueue.defer((n=this.oDriver.uploadTask,o=this.oDriver,function(){return n.apply(m(o)?null:o,Array.prototype.slice.call(arguments))}),t,e,r)}),this),d=this.getEvent("onCancel");if(!e||n&&!1===n(t,e))this.oDriver.cancel(t);else{a=i.bind((function(t,e,n,i,r,l){var p;p=function(e,i){var r=null;try{r=o.parseJSON(e)}catch(t){}r&&r.Result&&!r.Result.Error&&!r.ErrorCode?n(t,a):r&&r.Result&&r.Result.Error?(u.broadcastEvent("Jua::FileUploadingError"),s(i,!1,{ErrorCode:r.Result.Error})):r&&r.ErrorCode?(u.broadcastEvent("Jua::FileUploadingError"),s(i,!1,{ErrorCode:r.ErrorCode})):(u.broadcastEvent("Jua::FileUploadingError"),s(i,!1))};var d=v(this.oOptions,"hidden",{}),c=JSON.parse(A(d.Parameters,[e]));this.oDriver.regTaskUid(t),this.oDriver.uploadTask(t,e,c,p,i<r,!0,l)}),this);var c=r.observable(!0),f=JSON.parse(A(l.Parameters,[e]));u.broadcastEvent("Jua::FileUpload::isUploadAvailable",{isUploadAvailable:c,sModuleName:l.Module,sUid:t,oFileInfo:e}),c()?!1===u.broadcastEvent("Jua::FileUpload::before",{sUid:t,oFileInfo:e,fOnChunkReadyCallback:a,sModuleName:l.Module,fRegularUploadFileCallback:p,fCancelFunction:d,sStorageType:f.Type})&&p(t,e):i.isFunction(d)&&d(t)}},w.prototype.setOption=function(t,e){this.oOptions[t]=e},t.exports=w},jNBr:(t,e,n)=>{"use strict";var o=n("sdEb"),i=n("H20a"),r=n("REt5"),a=n("OfVV");function l(){this.iTimeStampInUTC=0,this.oMoment=null}l.prototype.parse=function(t){this.iTimeStampInUTC=t,this.oMoment=o.unix(this.iTimeStampInUTC)},l.prototype.setDate=function(t,e,n){this.oMoment=o([t,e,n])},l.prototype.getTimeFormat=function(){return a.timeFormat()===window.Enums.TimeFormat.F24?"HH:mm":"hh:mm A"},l.prototype.getFullDate=function(){return this.getDate()+" "+this.getTime()},l.prototype.getMidDate=function(){return this.getShortDate(!0)},l.prototype.getShortDate=function(t){var e="",n=null;return this.oMoment&&((n=o()).format("L")===this.oMoment.format("L")?e=this.oMoment.format(this.getTimeFormat()):(e=n.clone().subtract(1,"days").format("L")===this.oMoment.format("L")?i.i18n("COREWEBCLIENT/LABEL_YESTERDAY"):a.UserSelectsDateFormat?this.oMoment.format(r.getDateFormatForMoment(a.dateFormat())):n.year()===this.oMoment.year()?this.oMoment.format("MMM D"):this.oMoment.format("MMM D, YYYY"),t&&(e+=", "+this.oMoment.format(this.getTimeFormat())))),e},l.prototype.getDate=function(){var t="ddd, MMM D, YYYY";return a.UserSelectsDateFormat&&(t="ddd, "+r.getDateFormatForMoment(a.dateFormat())),this.oMoment?this.oMoment.format(t):""},l.prototype.getTime=function(){return this.oMoment?this.oMoment.format(this.getTimeFormat()):""},l.prototype.getTimeStampInUTC=function(){return this.iTimeStampInUTC},t.exports=l},l6qN:(t,e,n)=>{var o;!function(){function i(t){function e(){for(;l=p<u.length&&t>d;){var e=p++,o=u[e],i=a.call(o,1);i.push(n(e)),++d,o[0].apply(null,i)}}function n(t){return function(n,i){--d,null==f&&(null!=n?(f=n,p=c=NaN,o()):(u[t]=i,--c?l||e():o()))}}function o(){null!=f?m(f):s?m(f,u):m.apply(null,[f].concat(u))}var i,l,s,u=[],p=0,d=0,c=0,f=null,m=r;return t||(t=1/0),i={defer:function(){return f||(u.push(arguments),++c,e()),i},await:function(t){return m=t,s=!1,c||o(),i},awaitAll:function(t){return m=t,s=!0,c||o(),i}}}function r(){}var a=[].slice;i.version="1.0.7",void 0===(o=function(){return i}.call(e,n,e,t))||(t.exports=o)}()}}]);