(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[193],{C5H3:(e,t,o)=>{var i=o("p09A"),s=o("W66n");function a(e){this.sName="",this.visible=i.observable(!0),this.baseHash=i.observable(""),this.hash=i.observable(""),this.linkText=i.observable(e),this.isCurrent=i.observable(!1),this.recivedAnim=i.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=i.observable(0),this.allowChangeTitle=i.observable(!1),this.inactiveTitle=i.observable(""),this.excludedHashes=i.observableArray([])}a.prototype.ViewTemplate="CoreWebclient_HeaderItemView",a.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(s.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=a},i0GI:e=>{"use strict";e.exports={ServerModuleName:"TenantAdminPanelWebclient",HashModuleName:"tenant-adminpanel",init:function(e){}}},SOqY:(e,t,o)=>{"use strict";e.exports=function(e){var t=o("9kOp"),i=o("H20a"),s=o("i0GI"),a=null;s.init(e);var n=s.HashModuleName;return t.getUserRole()===Enums.UserRole.TenantAdmin?{getScreens:function(){var e={};return e[n]=function(){return o("rxMG")},e},getHeaderItem:function(){var e=o("C5H3");return null===a&&(a=new e(i.i18n("TENANTADMINPANELWEBCLIENT/LABEL_SETTINGS_TAB"))),{item:a,name:n}}}:null}},rxMG:(e,t,o)=>{"use strict";var i=o("M4cL"),s=o("a7T2"),a=o("p09A"),n=o("H20a"),r=o("9kOp"),l=o("skxT"),h=o("doeu"),u=o("Tt1R");function m(){h.call(this,"TenantAdminPanelWebclient"),this.browserTitle=a.observable(n.i18n("TENANTADMINPANELWEBCLIENT/HEADING_BROWSER_TAB")),this.sFrameUrl=u.getAppPath()+"adminpanel",this.iframeDom=a.observable(null),this.isLogoutStarted=!1,this.isLogoutError=!1,r.subscribeEvent("Logout",(e=>{this.isLogoutError||(this.isLogoutStarted?e.logoutPromises.push(new Promise(((e,t)=>{t()}))):e.logoutPromises.push(new Promise(((e,t)=>{if(this.isLogoutStarted=!0,this.iframeDom()&&this.iframeDom().length>0){const t=setTimeout((()=>{l.showLoading(n.i18n("TENANTADMINPANELWEBCLIENT/INFO_LOGOUT_FROM_ADMINPANEL"))}),1e3),o=setTimeout((()=>{this.isLogoutError=!0,l.hideLoading(),l.showReport(n.i18n("TENANTADMINPANELWEBCLIENT/ERROR_CANNOT_LOGOUT_FROM_ADMINPANEL"),0),i(".report_panel.report a").attr("href",this.sFrameUrl).on("click",(()=>{e()}))}),1e4);window.addEventListener("message",(function(i){i&&i.origin===window.location.origin&&i.data&&"after-logout"===i.data.eventName&&(l.hideLoading(),clearTimeout(t),clearTimeout(o),e())})),this.iframeDom()[0].contentWindow.postMessage({eventName:"logout"},window.location.origin)}else e()}))))})),r.broadcastEvent("TenantAdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}s.extendOwn(m.prototype,h.prototype),m.prototype.ViewTemplate="TenantAdminPanelWebclient_MainView",m.prototype.ViewConstructorName="CMainView",m.prototype.handleBeforeLogoutAndLogout=function(e){console.log("handleBeforeLogoutAndLogout",this.iframeDom()),this.iframeDom()&&this.iframeDom().length>0&&(this.iframeDom()[0].contentWindow.postMessage({eventName:"logout"},"*"),window.addEventListener("message",(function(t){console.log({oEvent:t}),t&&t.data&&"after-logout"===t.data.eventName&&e()})))},e.exports=new m}}]);