/*! For license information please see OpenPgpWebclient.app.7cfe77e78ad02bf8353f.min.js.LICENSE.txt */
"use strict";(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[995],{u9h2:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function E(){}function b(){}function P(){}var w={};p(w,c,(function(){return this}));var L=Object.getPrototypeOf,T=L&&L(L(F([])));T&&T!==r&&i.call(T,c)&&(w=T);var O=P.prototype=E.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=P,a(O,"constructor",{value:P,configurable:!0}),a(P,"constructor",{value:b,configurable:!0}),b.displayName=p(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(C.prototype),p(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),p(O,l,"Generator"),p(O,c,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))}}t.exports=function(t){if(!window.crypto||!window.crypto.getRandomValues)return null;var e=r("REt5"),n=r("9kOp"),i=r("oUN1"),s=null;if(n.isUserNormalOrTenant()){var c=r("a7T2"),u=r("H20a"),l=r("W4X/");return l.init(t),{start:function(t){var p=this;s=r("Aai9"),n.subscribeEvent("MailWebclient::RegisterMessagePaneController",(function(t){t(r("XaEU"),"BeforeMessageHeaders")})),n.isMobile()?t.run("MailMobileWebclient","registerComposeToolbarController",[r("Lz/N")]):t.run("MailWebclient","registerComposeToolbarController",[r("Lz/N")]),t.run("SettingsWebclient","registerSettingsTab",[function(){return r("JYH5")},l.HashModuleName,u.i18n("OPENPGPWEBCLIENT/LABEL_SETTINGS_TAB")]),n.subscribeEvent("MailWebclient::ParseFile::after",(function(o){if(o&&c.isFunction(o.addAction)&&"asc"===e.getFileExtension(o.fileName())&&o.content&&o.content()){var a=r("F4aK"),l=r("zAR3"),p=function(){if(o.folderName()&&o.messageUid()){var e=n.currentAccountEmail?n.currentAccountEmail():"",r=a.getPublicKeysIfExistsByEmail(e);r&&r[0]&&t.run("MailWebclient","getMessage",[o.folderName(),o.messageUid(),function(t){i.showPopup(l,[t,r[0]])}])}},h={Text:u.i18n("OPENPGPWEBCLIENT/ACTION_FILE_IMPORT_KEY"),Handler:function(){i.showPopup(s,[{armor:o.content(),onSuccessCallback:p}])}};o.addAction("import",!0,h),o.removeAction("view")}})),n.subscribeEvent("FilesWebclient::ParseFile::after",(function(t){var r=t[0];if(r&&c.isFunction(r.addAction)&&"asc"===e.getFileExtension(r.fileName())&&r.content&&r.content()){var n={Text:u.i18n("OPENPGPWEBCLIENT/ACTION_FILE_IMPORT_KEY"),Handler:function(){i.showPopup(s,[{armor:r.content()}])}};r.addAction("import",!0,n)}}));var h=function(){var t=a(o().mark((function t(e){var r,n,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.Contact,n=e.Callback,i=null,a={Error:!1,ErrorMessage:""},""==r.PublicPgpKey){t.next=6;break}return t.next=4,p.getKeyInfo(r.PublicPgpKey);case 4:(i=t.sent)?i.getEmail()!==r.ViewEmail?(a.Error=!0,a.ErrorMessage=u.i18n("OPENPGPWEBCLIENT/ERROR_EMAILS_DO_NOT_MATCH")):i.isPrivate()&&(a.Error=!0,a.ErrorMessage=u.i18n("OPENPGPWEBCLIENT/ERROR_ADDED_KEY_NOT_PUBLIC")):(a.Error=!0,a.ErrorMessage=u.i18n("OPENPGPWEBCLIENT/ERROR_IMPORT_NO_KEY_FOUND"));case 6:n(a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();n.subscribeEvent("ContactsWebclient::beforeCreateContactRequest",h),n.subscribeEvent("ContactsWebclient::beforeUpdateContactRequest",h)},getOpenPgpInMailEnabledObservable:function(){return l.enableOpenPgpInMail},getKeyInfo:function(t,e){return a(o().mark((function n(){var i,a,s,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r("M0hr"),a=r("q1Fa"),s=null,u=null,n.next=3,i.key.readArmored(t);case 3:return(s=n.sent)&&!s.err&&s.keys&&s.keys[0]&&(u=new a(s.keys[0])),c.isFunction(e)&&e(u),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n)})))()},getOpenPgpEncryptor:function(){return r("F4aK")},getPgpKeyControlsView:function(t){var e=r("/jAl");return e.setAfterRemoveContactKeyHandler(t),e},getSuggestionsAutocompleteFilteredCallback:function(t){return function(e,n){t(e,(function(t){var e=r("F4aK").getPublicKeys().map((function(t){return t.getEmail()}));t.forEach((function(t){t.hasKey||(t.hasKey=e.includes(t.email))})),n(t)}))}},getPrivateKeyPassword:function(t,e){return a(o().mark((function n(){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r("F4aK"),n.next=3,i.getPrivateKeyPassword(t);case 3:a=n.sent,e(a);case 5:case"end":return n.stop()}}),n)})))()},encryptSign:function(t,e,n,o,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,p=r("skxT"),h=r("oJ4D"),f=r("quQ1"),y=r("F4aK"),d=e?s:"",m="",v=c.bind((function(e){c.isFunction(a)&&a(e.result,t)}),this),g=function(t){h.showPgpErrorByCode(t,m)};if(t)if(0===o.length)p.showError(u.i18n("OPENPGPWEBCLIENT/ERROR_TO_ENCRYPT_SPECIFY_RECIPIENTS"));else{var E=[s],b=y.findKeysByEmails(E,!0).length>0?c.union(o,E):o;e?(m=f.PgpAction.EncryptSign,y.signAndEncrypt(n,d,b,l,v,g,i)):(m=f.PgpAction.Encrypt,y.encrypt(n,b,v,g,i))}else e&&(m=f.PgpAction.Sign,y.sign(n,d,v,g,l))}}}return null}},AMrN:(t,e,r)=>{var n=r("a7T2"),o=r("p09A"),i=r("H20a"),a=r("REt5"),s=(r("EFhx"),r("skxT")),c=r("o1lX"),u=r("oJ4D"),l=r("quQ1"),p=r("F4aK");function h(){c.call(this),this.data=o.observable(""),this.fromEmail=o.observable(""),this.emails=o.observableArray([]),this.contactsUUIDs=[],this.successEncryptCallback=function(){},this.needToSign=o.observable(!0),this.needToEncrypt=o.observable(!0),this.signEncryptButtonText=o.computed((function(){var t=i.i18n("OPENPGPWEBCLIENT/ACTION_SIGN_ENCRYPT");return this.needToSign()&&!this.needToEncrypt()&&(t=i.i18n("OPENPGPWEBCLIENT/ACTION_SIGN")),!this.needToSign()&&this.needToEncrypt()&&(t=i.i18n("OPENPGPWEBCLIENT/ACTION_ENCRYPT")),t}),this),this.isEnableSignEncrypt=o.computed((function(){return this.needToSign()||this.needToEncrypt()}),this),this.signEncryptCommand=a.createCommand(this,this.executeSignEncrypt,this.isEnableSignEncrypt)}n.extendOwn(h.prototype,c.prototype),h.prototype.PopupTemplate="OpenPgpWebclient_EncryptPopup",h.prototype.onOpen=function(t,e,r,o){this.data(t),this.fromEmail(e),this.emails(r.map((function(t){return t.email}))),this.contactsUUIDs=r.map((function(t){return t.uuid})),this.successEncryptCallback=n.isFunction(o)?o:function(){},this.needToSign(!0),this.needToEncrypt(!0)},h.prototype.executeSignEncrypt=function(){var t=this,e=this.data(),r=this.needToSign()?this.fromEmail():"",o=function(e){s.showReport(c),t.closePopup(),t.successEncryptCallback(e.result,t.needToEncrypt())},a=function(t){t&&t.userCanceled||u.showPgpErrorByCode(t,h)},c="",h="";if(this.needToEncrypt())if(0===this.emails().length)s.showError(i.i18n("OPENPGPWEBCLIENT/ERROR_TO_ENCRYPT_SPECIFY_RECIPIENTS"));else{var f=[this.fromEmail()],y=p.findKeysByEmails(f,!0).length>0?n.union(this.emails(),f):this.emails();this.needToSign()?(h=l.PgpAction.EncryptSign,c=i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_SIGNED_ENCRYPTED_SUCCSESSFULLY"),p.signAndEncrypt(e,r,y,"",o,a,this.contactsUUIDs)):(h=l.PgpAction.Encrypt,c=i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_ENCRYPTED_SUCCSESSFULLY"),p.encrypt(e,y,o,a,this.contactsUUIDs))}else this.needToSign()&&(h=l.PgpAction.Sign,c=i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_SIGNED_SUCCSESSFULLY"),p.sign(e,r,o,a,""))},h.prototype.cancelPopup=function(){this.closePopup()},t.exports=new h},wb42:(t,e,r)=>{var n=r("a7T2"),o=r("M4cL"),i=r("p09A"),a=r("9kOp"),s=r("kG5I"),c=r("H20a"),u=r("TdEd"),l=r("skxT"),p=r("o1lX"),h=r("oJ4D"),f=r("quQ1"),y=r("F4aK");function d(){p.call(this),this.emails=i.observableArray([]),this.selectedEmail=i.observable(""),this.password=i.observable(""),this.keyLengthOptions=[2048,4096],this.selectedKeyLength=i.observable(2048),this.process=i.observable(!1),this.keysExistText=i.observable("")}n.extendOwn(d.prototype,p.prototype),d.prototype.PopupTemplate="OpenPgpWebclient_GenerateKeyPopup",d.prototype.onOpen=function(){var t=a.getUserPublicId?[a.getUserPublicId()]:[],e=u.run("MailWebclient","getAllAccountsFullEmails")||t,r=y.getKeys(),o=n.map(r,(function(t){return s.getEmailParts(t.user).email})),i=[];n.each(e,(function(t){var e=s.getEmailParts(t);-1===n.indexOf(o,e.email)&&i.push(t)})),0===i.length&&this.keysExistText(c.i18n("OPENPGPWEBCLIENT/INFO_KEYS_EXIST_PLURAL",{},null,e.length)),this.emails(i),this.selectedEmail(""),this.password(""),this.selectedKeyLength(2048),this.process(!1)},d.prototype.generate=function(){if(0!==this.emails().length){var t=n.bind((function(){l.showReport(c.i18n("OPENPGPWEBCLIENT/REPORT_KEY_SUCCESSFULLY_GENERATED")),this.process(!1),this.closePopup()}),this),e=n.bind((function(){h.showPgpErrorByCode({},f.PgpAction.Generate),this.process(!1),this.closePopup()}),this);this.process(!0),n.delay(n.bind((function(){y.generateKey(this.selectedEmail(),o.trim(this.password()),this.selectedKeyLength(),t,e)}),this))}},t.exports=new d},zAR3:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function E(){}function b(){}function P(){}var w={};p(w,c,(function(){return this}));var L=Object.getPrototypeOf,T=L&&L(L(F([])));T&&T!==r&&i.call(T,c)&&(w=T);var O=P.prototype=E.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=P,a(O,"constructor",{value:P,configurable:!0}),a(P,"constructor",{value:b,configurable:!0}),b.displayName=p(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(C.prototype),p(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),p(O,l,"Generator"),p(O,c,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))}}var s=r("a7T2"),c=r("p09A"),u=r("EFhx"),l=r("TdEd").run("MailWebclient","getComposeMessageWithData"),p=r("o1lX"),h=r("H20a");function f(){p.call(this),this.bAllowSendEmails=s.isFunction(l),this.sEmail=c.observable(""),this.oMessage=c.observable(null),this.sSendKeyText=c.observable(""),this.oPublicKey=null,this.downloadLinkFilename=c.observable("")}s.extendOwn(f.prototype,p.prototype),f.prototype.PopupTemplate="OpenPgpWebclient_SendKeyPopup",f.prototype.onOpen=function(t,e){this.oMessage(t),this.sEmail(t.oFrom.getFirstEmail()),this.sSendKeyText(h.i18n("OPENPGPWEBCLIENT/INFO_SEND_KEY",{EMAIL:this.sEmail()})),this.oPublicKey=e;var r=this.oPublicKey.getUser().replace(/</g,"").replace(/>/g,"");this.downloadLinkFilename(h.i18n("OPENPGPWEBCLIENT/TEXT_PUBLIC_KEY_FILENAME",{USER:r})+".asc")},f.prototype.sendKey=a(o().mark((function t(){var e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bAllowSendEmails&&""!==this.oPublicKey.getArmor()&&""!==this.downloadLinkFilename()&&u.send("OpenPgpWebclient","SaveKeyAsTempFile",{Content:this.oPublicKey.getArmor(),FileName:this.downloadLinkFilename()},(function(t){t.Result&&(l({attachments:[t.Result],replyToMessage:e.oMessage()}),e.closePopup())}),this);case 1:case"end":return t.stop()}}),t,this)}))),t.exports=new f},grVS:(t,e,r)=>{var n=r("a7T2"),o=r("p09A"),i=r("H20a"),a=r("EFhx"),s=r("TdEd"),c=r("skxT"),u=r("oUN1"),l=r("XeMN"),p=s.run("MailWebclient","getComposeMessageWithAttachments"),h=r("o1lX");function f(){h.call(this),this.bAllowSendEmails=n.isFunction(p),this.armor=o.observable(""),this.htmlArmor=o.computed((function(){return i.encodeHtml(this.armor().replace(/\r/g,""))}),this),this.user=o.observable(""),this.private=o.observable(!1),this.popupHeading=o.computed((function(){return this.private()?i.i18n("OPENPGPWEBCLIENT/HEADING_VIEW_PRIVATE_KEY",{USER:this.user()}):i.i18n("OPENPGPWEBCLIENT/HEADING_VIEW_PUBLIC_KEY",{USER:this.user()})}),this),this.downloadLinkHref=o.computed((function(){var t="#",e=null;return Blob&&window.URL&&n.isFunction(window.URL.createObjectURL)&&(e=new Blob([this.armor()],{type:"text/plain"}),t=window.URL.createObjectURL(e)),t}),this),this.downloadLinkFilename=o.computed((function(){var t=this.user().replace(/</g,"").replace(/>/g,""),e=this.private()?"OPENPGPWEBCLIENT/TEXT_PRIVATE_KEY_FILENAME":"OPENPGPWEBCLIENT/TEXT_PUBLIC_KEY_FILENAME";return i.i18n(e,{USER:t})+".asc"}),this),this.domKey=o.observable(null)}n.extendOwn(f.prototype,h.prototype),f.prototype.PopupTemplate="OpenPgpWebclient_ShowKeyArmorPopup",f.prototype.onOpen=function(t){this.armor(t.getArmor()),this.user(t.getUser()),this.private(t.isPrivate())},f.prototype.send=function(){var t=this,e=function(){t.bAllowSendEmails&&""!==t.armor()&&""!==t.downloadLinkFilename()&&a.send("OpenPgpWebclient","SaveKeyAsTempFile",{Content:t.armor(),FileName:t.downloadLinkFilename()},(function(t){t.Result&&(p([t.Result]),this.closePopup())}),t)};if(this.private()){var r=i.i18n("OPENPGPWEBCLIENT/CONFIRM_SEND_PRIVATE_KEY");u.showPopup(l,[r,function(t){t&&e()}])}else e()},f.prototype.select=function(){var t=this.domKey()&&1===this.domKey().length?this.domKey()[0]:null,e=null,r=null;t&&window.getSelection&&document.createRange&&((r=document.createRange()).setStart(t,0),r.setEnd(t,1),(e=window.getSelection()).removeAllRanges(),e.addRange(r),document.queryCommandSupported("copy")&&(document.execCommand("copy"),c.showReport(i.i18n("OPENPGPWEBCLIENT/REPORT_KEY_IN_CLIPBOARD"))))},t.exports=new f},"y1/c":(t,e,r)=>{var n=r("a7T2"),o=r("p09A"),i=r("H20a"),a=r("EFhx"),s=r("TdEd"),c=r("skxT"),u=s.run("MailWebclient","getComposeMessageWithAttachments"),l=r("o1lX");function p(){l.call(this),this.bAllowSendEmails=n.isFunction(u),this.armors=o.observable(""),this.htmlArmor=o.computed((function(){return i.encodeHtml(this.armors().replace(/\r/g,""))}),this),this.popupHeading=o.computed((function(){return i.i18n("OPENPGPWEBCLIENT/HEADING_VIEW_ALL_PUBLIC_KEYS")}),this),this.downloadLinkHref=o.computed((function(){var t="#",e=null;return Blob&&window.URL&&n.isFunction(window.URL.createObjectURL)&&(e=new Blob([this.armors()],{type:"text/plain"}),t=window.URL.createObjectURL(e)),t}),this),this.downloadLinkFilename=o.computed((function(){return i.i18n("OPENPGPWEBCLIENT/TEXT_ALL_PUBLIC_KEYS_FILENAME")+".asc"}),this),this.domKey=o.observable(null)}n.extendOwn(p.prototype,l.prototype),p.prototype.PopupTemplate="OpenPgpWebclient_ShowKeyArmorPopup",p.prototype.onOpen=function(t){this.armors(t)},p.prototype.send=function(){this.bAllowSendEmails&&""!==this.armors()&&""!==this.downloadLinkFilename()&&a.send("OpenPgpWebclient","SaveKeyAsTempFile",{Content:this.armors(),FileName:this.downloadLinkFilename()},(function(t){t.Result&&(u([t.Result]),this.closePopup())}),this)},p.prototype.select=function(){var t=this.domKey()&&1===this.domKey().length?this.domKey()[0]:null,e=null,r=null;t&&window.getSelection&&document.createRange&&((r=document.createRange()).setStart(t,0),r.setEnd(t,1),(e=window.getSelection()).removeAllRanges(),e.addRange(r),document.queryCommandSupported("copy")&&(document.execCommand("copy"),c.showReport(i.i18n("OPENPGPWEBCLIENT/REPORT_KEY_IN_CLIPBOARD"))))},t.exports=new p},q2B8:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function E(){}function b(){}function P(){}var w={};p(w,c,(function(){return this}));var L=Object.getPrototypeOf,T=L&&L(L(F([])));T&&T!==r&&i.call(T,c)&&(w=T);var O=P.prototype=E.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=P,a(O,"constructor",{value:P,configurable:!0}),a(P,"constructor",{value:b,configurable:!0}),b.displayName=p(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(C.prototype),p(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),p(O,l,"Generator"),p(O,c,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))}}var s=r("a7T2"),c=r("p09A"),u=r("o1lX"),l=r("oJ4D"),p=r("F4aK");function h(){u.call(this),this.password=c.observable(""),this.oKey=null,this.fOkCallback=null}s.extendOwn(h.prototype,u.prototype),h.prototype.PopupTemplate="OpenPgpWebclient_VerifyPasswordPopup",h.prototype.onOpen=function(t,e){this.password(""),this.oKey=t,this.fOkCallback=e},h.prototype.confirmPasswordAndView=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.verifyKeyPassword(this.oKey,this.password());case 2:(e=t.sent).errors?l.showPgpErrorByCode(e):s.isFunction(this.fOkCallback)&&(this.fOkCallback(),this.closePopup());case 4:case"end":return t.stop()}}),t,this)}))),t.exports=new h},"Lz/N":(t,e,r)=>{var n=r("a7T2"),o=r("p09A"),i=r("REt5"),a=r("H20a"),s=r("9kOp"),c=r("skxT"),u=r("oUN1"),l=r("XeMN"),p=r("AMrN"),h=r("W4X/");function f(){this.sId="OpenPgp",this.bAllowMobile=!0,this.enableOpenPgpInMail=h.enableOpenPgpInMail,this.pgpSecured=o.observable(!1),this.pgpEncrypted=o.observable(!1),this.fromDrafts=o.observable(!1),this.disableHeadersEdit=this.pgpEncrypted,this.disableBodyEdit=this.pgpSecured,this.disableAutosave=this.pgpSecured,this.disableFromEdit=o.computed((function(){return this.pgpEncrypted()||this.pgpSecured()}),this),this.visibleDoPgpButton=o.computed((function(){return this.enableOpenPgpInMail()&&(!this.pgpSecured()||this.pgpEncrypted()&&this.fromDrafts())}),this),this.visibleUndoPgpButton=o.computed((function(){return this.enableOpenPgpInMail()&&this.pgpSecured()&&(!this.pgpEncrypted()||!this.fromDrafts())}),this),this.isEnableOpenPgpCommand=o.computed((function(){return this.enableOpenPgpInMail()&&!this.pgpSecured()}),this),this.openPgpCommand=i.createCommand(this,this.confirmOpenPgp,this.isEnableOpenPgpCommand),this.bComposeModeChanged=!1}f.prototype.ViewTemplate=s.isMobile()?"OpenPgpWebclient_ComposeButtonsMobileView":"OpenPgpWebclient_ComposeButtonsView",f.prototype.assignComposeExtInterface=function(t){this.oCompose=t},f.prototype.doAfterApplyingMainTabParameters=function(t){t.OpenPgp&&(this.pgpSecured(t.OpenPgp.Secured),this.pgpEncrypted(t.OpenPgp.Encrypted),this.fromDrafts(t.OpenPgp.FromDrafts),(this.pgpSecured()||this.pgpEncrypted())&&this.fromDrafts(!0))},f.prototype.doAfterPreparingMainTabParameters=function(t){t.OpenPgp={Secured:this.pgpSecured(),Encrypted:this.pgpEncrypted(),FromDrafts:this.fromDrafts()}},f.prototype.doAfterPopulatingMessage=function(t){if(this.bComposeModeChanged=!1,this.fromDrafts(t.bDraft),t.bPlain){var e=-1!==t.sRawText.indexOf("-----BEGIN PGP MESSAGE-----"),r=-1!==t.sRawText.indexOf("-----BEGIN PGP SIGNED MESSAGE-----");this.pgpSecured(r||e),this.pgpEncrypted(e)}else this.pgpSecured(!1),this.pgpEncrypted(!1)},f.prototype.doBeforeSave=function(t){return!!this.pgpSecured()&&(u.showPopup(l,[a.i18n("OPENPGPWEBCLIENT/CONFIRM_SAVE_ENCRYPTED_DRAFT"),t,"",a.i18n("COREWEBCLIENT/ACTION_SAVE")]),!0)},f.prototype.confirmOpenPgp=function(){if(this.oCompose)if(this.oCompose.getRecipientEmails().length<1)c.showError(a.i18n("OPENPGPWEBCLIENT/ERROR_TO_ENCRYPT_SPECIFY_RECIPIENTS"));else if(this.oCompose.isHtml()){var t=a.i18n("OPENPGPWEBCLIENT/CONFIRM_HTML_TO_PLAIN_FORMATTING"),e=n.bind((function(t){t&&this.openPgpPopup()}),this);this.oCompose.hasAttachments()&&(t+="\r\n\r\n"+a.i18n("OPENPGPWEBCLIENT/CONFIRM_HTML_TO_PLAIN_ATTACHMENTS")),u.showPopup(l,[t,e])}else this.openPgpPopup()},f.prototype.openPgpPopup=function(){var t=this;this.oCompose&&u.showPopup(p,[this.oCompose.getPlainText(),this.oCompose.getFromEmail(),this.oCompose.getRecipientsInfo(),function(e,r){t.oCompose.isHtml()&&(t.oCompose.setPlainTextMode(),t.bComposeModeChanged=!0),t.oCompose.setPlainText(e),t.pgpSecured(!0),t.pgpEncrypted(r)}])},f.prototype.undoPgp=function(){var t="",e=[];this.oCompose&&this.pgpSecured()&&(this.bComposeModeChanged&&(this.oCompose.setHtmlTextMode(),this.bComposeModeChanged=!1),this.fromDrafts()&&!this.pgpEncrypted()?(2===(e=(t=this.oCompose.getPlainText()).split("-----BEGIN PGP SIGNED MESSAGE-----")).length&&(t=e[1]),2===(e=t.split("-----BEGIN PGP SIGNATURE-----")).length&&(t=e[0]),(e=t.split("\r\n\r\n")).length>0&&(e.shift(),t=e.join("\r\n\r\n")),this.oCompose.isHtml()?this.oCompose.setHtmlText("<div>"+t.replace(/\r\n/gi,"<br />")+"</div>"):this.oCompose.setPlainText(t)):this.oCompose.undoHtml(),this.pgpSecured(!1),this.pgpEncrypted(!1))},t.exports=new f},XaEU:(t,e,r)=>{var n=r("a7T2"),o=r("p09A"),i=r("H20a"),a=r("skxT"),s=r("oJ4D"),c=r("quQ1"),u=r("F4aK"),l=r("W4X/");function p(){this.sText="",this.sAccountEmail="",this.sFromEmail="",this.oEncryptionKey=null,this.isEncryptedMessage=o.observable(!1),this.visibleDecryptControl=o.observable(!1),this.visibleVerifyControl=o.observable(!1)}p.prototype.ViewTemplate="OpenPgpWebclient_MessageControlsView",p.prototype.reset=function(){this.sText="",this.sAccountEmail="",this.sFromEmail="",this.isEncryptedMessage(!1),this.visibleDecryptControl(!1),this.visibleVerifyControl(!1)},p.prototype.assignMessagePaneExtInterface=function(t){this.oMessagePane=t},p.prototype.doAfterPopulatingMessage=function(t){var e=this;t&&t.bPlain?(this.sText=t.sRawText,this.sAccountEmail=t.sAccountEmail,this.sFromEmail=t.sFromEmail,l.enableOpenPgpInMail()?(this.isEncryptedMessage(-1!==t.sText.indexOf("-----BEGIN PGP MESSAGE-----")),this.visibleVerifyControl(-1!==t.sText.indexOf("-----BEGIN PGP SIGNED MESSAGE-----")),this.isEncryptedMessage()&&u.getEncryptionKeyFromArmoredMessage(this.sText).then((function(t){t?(e.visibleDecryptControl(!0),e.oEncryptionKey=t):e.visibleDecryptControl(!1)})),this.visibleDecryptControl(this.isEncryptedMessage())):this.visibleDecryptControl(!1),(this.visibleVerifyControl()||this.visibleDecryptControl())&&this.oMessagePane&&this.oMessagePane.changeText("<pre>"+i.encodeHtml(this.sText)+"</pre>")):this.reset()},p.prototype.decryptMessage=function(){var t=n.bind((function(t){t&&t.result&&!t.errors&&this.oMessagePane&&(this.oMessagePane.changeText("<pre>"+i.plainToHtml(t.result,!0)+"</pre>"),this.isEncryptedMessage(!1),this.visibleDecryptControl(!1),t.notices?a.showError(i.i18n("OPENPGPWEBCLIENT/ERROR_MESSAGE_SUCCESSFULLY_DECRYPTED_BUT_NOT_VERIFIED")):a.showReport(i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_SUCCESSFULLY_DECRYPTED_AND_VERIFIED")))}),this);u.decryptAndVerify(this.sText,this.oEncryptionKey,this.sFromEmail,"",t,(function(t){t&&(t.errors||t.notices)&&s.showPgpErrorByCode(t,c.PgpAction.DecryptVerify)&&a.showReport(i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_SUCCESSFULLY_DECRYPTED_AND_NOT_SIGNED"))}))},p.prototype.verifyMessage=function(){var t=n.bind((function(t){t&&t.result&&!t.errors&&!t.notices&&this.oMessagePane&&(this.oMessagePane.changeText("<pre>"+i.encodeHtml(t.result)+"</pre>"),this.visibleVerifyControl(!1),a.showReport(i.i18n("OPENPGPWEBCLIENT/REPORT_MESSAGE_SUCCESSFULLY_VERIFIED")))}),this);u.verify(this.sText,this.sFromEmail,t,(function(t){t&&(t.errors||t.notices)&&s.showPgpErrorByCode(t,c.PgpAction.Verify)}))},t.exports=new p},JYH5:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function E(){}function b(){}function P(){}var w={};p(w,c,(function(){return this}));var L=Object.getPrototypeOf,T=L&&L(L(F([])));T&&T!==r&&i.call(T,c)&&(w=T);var O=P.prototype=E.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=P,a(O,"constructor",{value:P,configurable:!0}),a(P,"constructor",{value:b,configurable:!0}),b.displayName=p(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(C.prototype),p(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),p(O,l,"Generator"),p(O,c,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var a=r("a7T2"),s=r("p09A"),c=r("H20a"),u=r("9kOp"),l=r("TdEd"),p=r("oUN1"),h=r("skxT"),f=l.run("SettingsWebclient","getAbstractSettingsFormViewClass"),y=r("oJ4D"),d=r("wb42"),m=r("Aai9"),v=r("F4aK"),g=r("W4X/"),E=r("y1/c"),b=r("q2B8"),P=l.isModuleAvailable("TeamContacts");function w(){f.call(this,g.ServerModuleName),this.bTeamContactsAvailable=P,this.enableOpenPgpInMail=s.observable(g.enableOpenPgpInMail()),this.rememberPassphrase=g.rememberPassphrase,this.isMailAvailable=l.isModuleAvailable("Mail"),this.keys=s.observableArray(v.getKeys()),v.getKeysObservable().subscribe((function(){this.keys(v.getKeys())}),this),this.noOwnKeyInTeamContacts=s.computed((function(){return!1===v.ownKeyFromTeamContacts()})),this.publicKeysFromThisDevice=s.computed((function(){return this.keys().filter((function(t){return!t.isFromContacts&&t.isPublic()})).map((function(t){var e=P&&t.getEmail()===u.getUserPublicId(),r=v.ownKeyFromTeamContacts(),n=e&&r&&t.getId()===r.getId();return{key:t,user:t.getUser(),isOwn:e,hasOwnKeyFromTeamContacts:!!r,isSameKeyFromTeamContacts:n}}))}),this),this.privateKeysFromThisDevice=s.computed((function(){return this.keys().filter((function(t){return!t.isFromContacts&&t.isPrivate()})).map((function(t){return{key:t,user:t.getUser()}}))}),this),this.keysFromPersonalContacts=s.computed((function(){return this.keys().filter((function(t){return t.isFromContacts})).map((function(t){return{key:t,user:t.getUser()}}))}),this),this.oPgpKeyControlsView=l.run("OpenPgpWebclient","getPgpKeyControlsView")}a.extendOwn(w.prototype,f.prototype),w.prototype.ViewTemplate="OpenPgpWebclient_OpenPgpSettingsFormView",w.prototype.saveOwnKeyToTeamContact=function(){var t,e=(t=o().mark((function t(e){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getArmor(),t.next=3,v.addKeyToContact(r,"",!0);case 3:(n=t.sent)&&n.result?h.showReport(c.i18n("OPENPGPWEBCLIENT/REPORT_KEY_SUCCESSFULLY_IMPORTED_PLURAL",{},null,1)):y.showPgpErrorByCode(n,Enums.PgpAction.Import,c.i18n("OPENPGPWEBCLIENT/ERROR_IMPORT_KEY"));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}(),w.prototype.exportAllPublicKeys=function(){var t=a.map(a.union(this.publicKeysFromThisDevice(),this.keysFromPersonalContacts()),(function(t){return t.key.getArmor()}));t.length>0&&p.showPopup(E,[t.join("\n")])},w.prototype.importKey=function(){p.showPopup(m,[{}])},w.prototype.generateNewKey=function(){p.showPopup(d)},w.prototype.removeKeyFromContacts=function(t){this.oPgpKeyControlsView.removeKeyFromContacts(t)},w.prototype.removeKeyFromThisDevice=function(t){this.oPgpKeyControlsView.removeKeyFromThisDevice(t)},w.prototype.showArmor=function(t){var e=this;t.isPublic()?this.oPgpKeyControlsView.showArmor(t):p.showPopup(b,[t,function(){e.oPgpKeyControlsView.showArmor(t)}])},w.prototype.getCurrentValues=function(){return[this.enableOpenPgpInMail(),this.rememberPassphrase()]},w.prototype.revertGlobalValues=function(){this.enableOpenPgpInMail(g.enableOpenPgpInMail()),this.rememberPassphrase(g.rememberPassphrase())},w.prototype.getParametersForSave=function(){return{EnableModule:this.enableOpenPgpInMail(),RememberPassphrase:this.rememberPassphrase()}},w.prototype.applySavedValues=function(t){g.update(t.EnableModule)},t.exports=new w},"/jAl":(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",d="suspendedYield",m="executing",v="completed",g={};function E(){}function b(){}function P(){}var w={};p(w,c,(function(){return this}));var L=Object.getPrototypeOf,T=L&&L(L(F([])));T&&T!==r&&i.call(T,c)&&(w=T);var O=P.prototype=E.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function _(e,r,n){var o=y;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=P,a(O,"constructor",{value:P,configurable:!0}),a(P,"constructor",{value:b,configurable:!0}),b.displayName=p(P,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(C.prototype),p(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(O),p(O,l,"Generator"),p(O,c,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))}}var s=r("H20a"),c=r("XeMN"),u=r("oUN1"),l=r("skxT"),p=r("F4aK"),h=r("grVS");function f(){}f.prototype.ViewTemplate="OpenPgpWebclient_PgpKeyControlsView";var y=function(){var t=a(o().mark((function t(e,r,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=5;break}return t.next=3,p.getKeysFromArmors([{Email:r,PublicPgpKey:e,UUID:n}]);case 3:return i=t.sent,t.abrupt("return",1===i.length?i[0]:null);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();f.prototype.showArmor=function(){var t=a(o().mark((function t(e,r,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,r,n);case 2:(i=t.sent)&&u.showPopup(h,[i]);case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),f.prototype.setAfterRemoveContactKeyHandler=function(t){this.afterRemoveContactKeyHandler="function"==typeof t?t:function(){}},f.prototype.removeKeyFromContacts=function(){var t=a(o().mark((function t(e,r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.removeKey(e,r,n,"removeKeyFromContacts");case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),f.prototype.removeKeyFromThisDevice=function(){var t=a(o().mark((function t(e,r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.removeKey(e,r,n,"removeKeyFromThisDevice");case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),f.prototype.removeKey=function(){var t=a(o().mark((function t(e,r,n,i){var h,f,d,m=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,r,n);case 2:h=t.sent,f=function(){var t=a(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,p[i](h);case 3:t.sent.result?m.afterRemoveContactKeyHandler():l.showError(s.i18n("OPENPGPWEBCLIENT/ERROR_DELETE_KEY"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=s.i18n("OPENPGPWEBCLIENT/CONFIRM_DELETE_KEY",{KEYEMAIL:h.getEmail()}),u.showPopup(c,[d,f]);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),t.exports=new f}}]);