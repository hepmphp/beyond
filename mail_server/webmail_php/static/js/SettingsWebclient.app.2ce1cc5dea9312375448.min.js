(self.webpackChunkafterlogic_aurora_platform=self.webpackChunkafterlogic_aurora_platform||[]).push([[511],{C5H3:(e,t,s)=>{var i=s("p09A"),n=s("W66n");function a(e){this.sName="",this.visible=i.observable(!0),this.baseHash=i.observable(""),this.hash=i.observable(""),this.linkText=i.observable(e),this.isCurrent=i.observable(!1),this.recivedAnim=i.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=i.observable(0),this.allowChangeTitle=i.observable(!1),this.inactiveTitle=i.observable(""),this.excludedHashes=i.observableArray([])}a.prototype.ViewTemplate="CoreWebclient_HeaderItemView",a.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(n.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=a},ckPu:(e,t,s)=>{"use strict";var i=s("a7T2"),n=s("KC/L");e.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(e){var t=e.SettingsWebclient;i.isEmpty(t)||(this.TabsOrder=n.pArray(t.TabsOrder,this.TabsOrder))}}},mZzX:(e,t,s)=>{"use strict";e.exports=function(e){var t=s("9kOp"),i=null;if(t.isUserNormalOrTenant()){var n=s("ckPu");return n.init(e),{getScreens:function(){var e={};return e[n.HashModuleName]=function(){return s("7bsT")},e},getHeaderItem:function(){if(null===i){var e=s("H20a"),t=s("C5H3");i=new t(e.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:i,name:n.HashModuleName}},registerSettingsTab:function(e,t,i){s("7bsT").registerTab(e,t,i)},registerSettingsTabSection:function(e,t,i){s("7bsT").registerTabSection(e,t,i)},getAbstractSettingsFormViewClass:function(){return s("/wNe")},setAddHash:function(e){s("7bsT").setAddHash(e)}}}return null}},"/wNe":(e,t,s)=>{"use strict";var i=s("a7T2"),n=s("p09A"),a=s("H20a"),r=s("EFhx"),o=s("/QeJ"),h=s("skxT"),u=s("oUN1"),c=s("XeMN");function b(e){this.sServerModule=e||"Core",this.isSaving=n.observable(!1),this.visible=n.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}b.prototype.ViewTemplate="",b.prototype.addSettingsSection=function(e){this.aSettingsSections.push(e)},b.prototype.showTab=function(e){this.bShown=!0,this.revert(),i.isFunction(this.onShow)&&this.onShow(e),i.each(this.aSettingsSections,(function(t){i.isFunction(t.onShow)&&t.onShow(e)}))},b.prototype.hasUnsavedChanges=function(){var e=this.getCurrentState()!==this.sSavedState;return i.each(this.aSettingsSections,(function(t){i.isFunction(t.getCurrentState)&&(e=e||t.getCurrentState()!==t.sSavedState)})),e},b.prototype.hide=function(e,t){this.hasUnsavedChanges()?u.showPopup(c,[a.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),i.bind((function(s){s?(this.bShown=!1,e(),this.revert()):i.isFunction(t)&&t()}),this)]):(this.bShown=!1,e())},b.prototype.getCurrentValues=function(){return[]},b.prototype.getCurrentState=function(){return this.getCurrentValues().join(":")},b.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},b.prototype.revertGlobalValues=function(){},b.prototype.revert=function(){i.each(this.aSettingsSections,(function(e){i.isFunction(e.revert)&&e.revert()})),this.revertGlobalValues(),this.updateSavedState()},b.prototype.getParametersForSave=function(){return{}},b.prototype.save=function(){i.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),r.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},b.prototype.applySavedValues=function(e){},b.prototype.onResponse=function(e,t){if(this.isSaving(!1),e.Result){var s=t.Parameters;this.updateSavedState(),this.applySavedValues(s),h.showReport(a.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else o.showErrorByCode(e,a.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},b.prototype.setAccessLevel=function(e,t){},e.exports=b},"7bsT":(e,t,s)=>{"use strict";var i=s("a7T2"),n=s("M4cL"),a=s("p09A"),r=s("9kOp"),o=s("W66n"),h=s("doeu"),u=s("ckPu"),c=n("html");function b(){h.call(this,"SettingsWebclient"),this.tabs=a.observableArray([]),this.currentTab=a.observable(null),r.subscribeEvent("OpenSettingTab",i.bind((function(e){this.changeTab(e.Name)}),this)),r.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}i.extendOwn(b.prototype,h.prototype),b.prototype.ViewTemplate="SettingsWebclient_SettingsView",b.prototype.ViewConstructorName="CSettingsView",b.prototype.registerTab=function(e,t,s){var n=u.TabsOrder.length,a=e(),r=i.findWhere(this.tabs(),{name:t});i.isEmpty(a)||(a.SettingsTabName=t,a.SettingsTabTitle=s,r&&(i.isArray(r.sections)&&(i.each(r.sections,(function(e){a.addSettingsSection(e)})),delete r.sections),r.view=a)),r||this.tabs.push({view:a,name:t}),this.tabs(i.sortBy(this.tabs(),(function(e){var t=i.indexOf(u.TabsOrder,e.name);return-1!==t?t:n})))},b.prototype.registerTabSection=function(e,t){var s=i.findWhere(this.tabs(),{name:t}),n=e();s?s.view.addSettingsSection(n):(this.registerTab((function(){return{visible:a.observable(!1)}}),t,""),(s=i.findWhere(this.tabs(),{name:t}))&&(i.isArray(s.sections)||(s.sections=[]),s.sections.push(n)))},b.prototype.hasUnsavedChanges=function(){var e=this.currentTab();return e&&e.view&&i.isFunction(e.view.hasUnsavedChanges)&&e.view.hasUnsavedChanges()},b.prototype.discardChanges=function(){var e=this.currentTab();e&&e.view&&i.isFunction(e.view.revert)&&e.view.revert()},b.prototype.onShow=function(){c.addClass("non-adjustable")},b.prototype.onHide=function(){var e=this.currentTab();e&&i.isFunction(e.view.hide)&&e.view.hide((function(){}),(function(){})),c.removeClass("non-adjustable")},b.prototype.onRoute=function(e){var t=e.shift(),s=this.currentTab(),n=i.find(this.tabs(),(function(e){return e.name===t})),a=function(){n&&(i.isFunction(n.view.showTab)&&n.view.showTab(e),this.currentTab(n),n.name!==t&&o.replaceHashDirectly([u.HashModuleName,n.name]))}.bind(this),r=i.bind((function(){s&&o.replaceHashDirectly([u.HashModuleName,s.name])}),this),h=!0;s&&t===s.name?i.isFunction(s.view.showTab)&&s.view.showTab(e):(n&&n.view.visible&&!n.view.visible()&&(n=i.find(this.tabs(),(function(e){return!e.view.visible||e.view.visible()}))),n?s&&i.isFunction(s.view.hide)&&(s.view.hide(a,r),h=!1):s||(n=i.find(this.tabs(),(function(e){return!e.view.visible||e.view.visible()}))),h&&a())},b.prototype.changeTab=function(e){o.setHash([u.HashModuleName,e])},b.prototype.setAddHash=function(e){o.setHash(i.union([u.HashModuleName,this.currentTab()?this.currentTab().name:""],e))},e.exports=new b}}]);