"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[484],{2484:(s,e,a)=>{a.r(e),a.d(e,{default:()=>K});var o=a(9835),l=a(1957);const n={class:"full-height full-width"},t={class:"q-pa-lg"},i={class:"row q-mb-md"},d={class:"col text-h5"},r={class:"row q-mb-md"},u={class:"col-2 q-my-sm"},w={class:"col-5"},m={class:"row q-mb-md"},c={class:"col-2 q-my-sm"},E={class:"col-5"},h={class:"row q-mb-md"},g={class:"col-2 q-my-sm"},p={class:"col-5"},_={class:"row q-mb-md"},P={class:"col-2 q-my-sm"},N={class:"col-5"},A={class:"row"},L={class:"col-2 q-my-sm"},R={class:"col-5"},v={class:"q-pt-md text-right"};function C(s,e,a,C,T,I){const S=(0,o.up)("q-input"),f=(0,o.up)("q-select"),W=(0,o.up)("q-card-section"),y=(0,o.up)("q-card"),O=(0,o.up)("q-btn"),D=(0,o.up)("q-scroll-area"),q=(0,o.up)("q-linear-progress"),b=(0,o.up)("q-inner-loading"),Z=(0,o.Q2)("t");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(D,{class:"full-height full-width"},{default:(0,o.w5)((()=>[(0,o._)("div",t,[(0,o._)("div",i,[(0,o.wy)((0,o._)("div",d,null,512),[[Z,"ADMINPANELWEBCLIENT.HEADING_SECURITY_SETTINGS"]])]),(0,o.Wm)(y,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.wy)((0,o._)("div",u,null,512),[[Z,"ADMINPANELWEBCLIENT.LABEL_SECURITY_LOGIN"]]),(0,o._)("div",w,[(0,o.Wm)(S,{outlined:"",dense:"","bg-color":"white",modelValue:T.login,"onUpdate:modelValue":e[0]||(e[0]=s=>T.login=s),onKeyup:(0,l.D2)(I.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",m,[(0,o.wy)((0,o._)("div",c,null,512),[[Z,"ADMINPANELWEBCLIENT.LABEL_SECURITY_PASS"]]),(0,o._)("div",E,[(0,o.Wm)(S,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:T.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>T.oldPassword=s),ref:"oldPassword",onKeyup:(0,l.D2)(I.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",h,[(0,o.wy)((0,o._)("div",g,null,512),[[Z,"ADMINPANELWEBCLIENT.LABEL_SECURITY_NEW_PASS"]]),(0,o._)("div",p,[(0,o.Wm)(S,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:T.newPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>T.newPassword=s),ref:"newPassword",onKeyup:(0,l.D2)(I.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",_,[(0,o.wy)((0,o._)("div",P,null,512),[[Z,"ADMINPANELWEBCLIENT.LABEL_SECURITY_CONFIRM_PASS"]]),(0,o._)("div",N,[(0,o.Wm)(S,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:T.confirmNewPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>T.confirmNewPassword=s),onKeyup:(0,l.D2)(I.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",A,[(0,o.wy)((0,o._)("div",L,null,512),[[Z,"COREWEBCLIENT.LABEL_LANGUAGE"]]),(0,o._)("div",R,[(0,o.Wm)(f,{outlined:"",dense:"","bg-color":"white",modelValue:T.language,"onUpdate:modelValue":e[4]||(e[4]=s=>T.language=s),"emit-value":"","map-options":"",options:T.languageOptions,"option-label":"name"},null,8,["modelValue","options"])])])])),_:1})])),_:1}),(0,o._)("div",v,[(0,o.Wm)(O,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:I.save,label:s.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])])])),_:1}),(0,o.Wm)(b,{style:{"justify-content":"flex-start"},showing:T.saving},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{query:""})])),_:1},8,["showing"])])}var T=a(4409),I=a.n(T),S=a(9336),f=a(1427),W=a(2456),y=a(1088);const O={name:"AdminAccount",data(){return{login:"",oldPassword:"",newPassword:"",confirmNewPassword:"",language:"",languageOptions:[],saving:!1,adminHasPassword:!1}},beforeRouteLeave(s,e,a){this.$root.doBeforeRouteLeave(s,e,a)},mounted(){this.languageOptions=y.Z.getLanguageList(),this.saving=!1,this.populate()},methods:{populate(){const s=y.Z.getAdminAccountData();this.login=s.adminLogin,this.oldPassword="",this.newPassword="",this.confirmNewPassword="",this.language=s.adminLanguage,this.adminHasPassword=s.adminHasPassword},hasChanges(){const s=y.Z.getAdminAccountData();return this.login!==s.adminLogin||""!==this.oldPassword||""!==this.newPassword||""!==this.confirmNewPassword||this.language!==s.adminLanguage},revertChanges(){this.populate()},isDataValid(){const s=I().trim(this.oldPassword),e=I().trim(this.newPassword),a=I().trim(this.confirmNewPassword);return""===s&&""===e&&""===a||(this.adminHasPassword&&""===s?(f.Z.showError(this.$t("ADMINPANELWEBCLIENT.ERROR_CURRENT_PASSWORD_EMPTY")),this.$refs.oldPassword.$el.focus(),!1):this.adminHasPassword||""===s?""===e?(f.Z.showError(this.$t("ADMINPANELWEBCLIENT.ERROR_NEW_PASSWORD_EMPTY")),this.$refs.newPassword.$el.focus(),!1):e===a||(f.Z.showError(this.$t("COREWEBCLIENT.ERROR_PASSWORDS_DO_NOT_MATCH")),this.$refs.newPassword.$el.focus(),!1):(f.Z.showError(this.$t("COREWEBCLIENT.ERROR_CURRENT_PASSWORD_NOT_CORRECT")),this.$refs.oldPassword.$el.focus(),!1))},save(){if(!this.saving&&this.isDataValid()){this.saving=!0;const s={AdminLogin:this.login,AdminLanguage:this.language};I().isEmpty(this.newPassword)||(s.Password=this.oldPassword,s.NewPassword=this.newPassword),W.Z.sendRequest({moduleName:"Core",methodName:"UpdateSettings",parameters:s}).then((e=>{this.saving=!1,!0===e?(y.Z.saveAdminAccountData({login:s.AdminLogin,hasPassword:!I().isEmpty(s.NewPassword)||this.adminHasPassword,language:s.AdminLanguage}),this.populate(),f.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):f.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(s=>{this.saving=!1,f.Z.showError(S.Z.getTextFromResponse(s,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}};var D=a(1639),q=a(6663),b=a(4458),Z=a(3190),B=a(6611),V=a(8401),$=a(8879),U=a(854),M=a(8289),G=a(9984),Q=a.n(G);const H=(0,D.Z)(O,[["render",C]]),K=H;Q()(O,"components",{QScrollArea:q.Z,QCard:b.Z,QCardSection:Z.Z,QInput:B.Z,QSelect:V.Z,QBtn:$.Z,QInnerLoading:U.Z,QLinearProgress:M.Z})}}]);