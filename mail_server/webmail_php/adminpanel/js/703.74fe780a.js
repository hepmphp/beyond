"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[703],{4410:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var s=a(7214),n=a(5885),l=a(8936),o=(a(3203),a(9835)),i=a(1957);const r={class:"q-pa-lg"},d={class:"row q-mb-md"},p={class:"col text-h5"},c={class:"row q-mb-md"},m={class:"col-2 q-my-sm"},h={class:"col-5"},u={class:"row q-mb-md"},g={class:"col-2 q-my-sm"},C={class:"col-5"},A={class:"row q-mb-md"},I={class:"col-2 q-my-sm"},E={class:"col-5"},T={class:"row"},w={class:"col-2 q-my-sm"},_={class:"col-5"},N={class:"q-pt-md text-right"};function v(e,t,a,s,n,l){const v=(0,o.up)("q-input"),R=(0,o.up)("q-card-section"),P=(0,o.up)("q-card"),L=(0,o.up)("q-btn"),S=(0,o.up)("q-linear-progress"),Z=(0,o.up)("q-inner-loading"),b=(0,o.up)("q-scroll-area"),q=(0,o.Q2)("t");return(0,o.wg)(),(0,o.j4)(b,{class:"full-height full-width"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("div",d,[(0,o.wy)((0,o._)("div",p,null,512),[[q,"CPANELINTEGRATOR.HEADING_SETTINGS_TAB"]])]),(0,o.Wm)(P,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(R,null,{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.wy)((0,o._)("div",m,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_HOST"]]),(0,o._)("div",h,[(0,o.Wm)(v,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelHost,"onUpdate:modelValue":t[0]||(t[0]=e=>n.cpanelHost=e),onKeyup:(0,i.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",u,[(0,o.wy)((0,o._)("div",g,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_PORT"]]),(0,o._)("div",C,[(0,o.Wm)(v,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelPort,"onUpdate:modelValue":t[1]||(t[1]=e=>n.cpanelPort=e),onKeyup:(0,i.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",A,[(0,o.wy)((0,o._)("div",I,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_USER"]]),(0,o._)("div",E,[(0,o.Wm)(v,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelUser,"onUpdate:modelValue":t[2]||(t[2]=e=>n.cpanelUser=e),onKeyup:(0,i.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,o._)("div",T,[(0,o.wy)((0,o._)("div",w,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_PASS"]]),(0,o._)("div",_,[(0,o.Wm)(v,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:n.password,"onUpdate:modelValue":t[3]||(t[3]=e=>n.password=e),onKeyup:(0,i.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])])])),_:1})])),_:1}),(0,o._)("div",N,[(0,o.Wm)(L,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:l.save,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])]),(0,o.Wm)(Z,{style:{"justify-content":"flex-start"},showing:n.loading||n.saving},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{query:""})])),_:1},8,["showing"])])),_:1})}var R=a(9336),P=a(1427),L=a(4089),S=a(2456);const Z="     ",b={name:"CpanelAdminSettingsPerTenant",data(){return{saving:!1,loading:!1,cpanelHost:"",cpanelPort:"",cpanelUser:"",cpanelHasPassword:!1,password:Z,savedPass:Z}},computed:{tenantId(){return this.$store.getters["tenants/getCurrentTenantId"]}},watch:{"$store.state.tenants.tenants":{handler:function(){this.populate()},deep:!0}},beforeRouteLeave(e,t,a){this.$root.doBeforeRouteLeave(e,t,a)},mounted(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges(){if(this.loading)return!1;const e=L.Z.pObject(this.tenant?.completeData),t=e["CpanelIntegrator::CpanelPort"];return this.cpanelHost!==e["CpanelIntegrator::CpanelHost"]||L.Z.pInt(this.cpanelPort)!==t||this.cpanelUser!==e["CpanelIntegrator::CpanelUser"]||this.password!==this.savedPass},revertChanges(){const e=L.Z.pObject(this.tenant?.completeData);this.cpanelHost=e["CpanelIntegrator::CpanelHost"],this.cpanelPort=e["CpanelIntegrator::CpanelPort"],this.cpanelUser=e["CpanelIntegrator::CpanelUser"],this.password=this.savedPass},populate(){const e=this.$store.getters["tenants/getTenant"](this.tenantId);e&&(void 0!==e.completeData["CpanelIntegrator::CpanelHost"]?(this.tenant=e,this.cpanelHost=e.completeData["CpanelIntegrator::CpanelHost"],this.cpanelPort=e.completeData["CpanelIntegrator::CpanelPort"],this.cpanelUser=e.completeData["CpanelIntegrator::CpanelUser"],this.cpanelHasPassword=e.completeData["CpanelIntegrator::CpanelHasPassword"]):this.getSettings())},save(){if(!this.saving){this.saving=!0;const e={CpanelHost:this.cpanelHost,CpanelPort:L.Z.pInt(this.cpanelPort),CpanelUser:this.cpanelUser,TenantId:this.tenantId};this.password!==Z&&(e.CpanelPassword=this.password),S.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"UpdateSettings",parameters:e}).then((t=>{if(this.saving=!1,!0===t){this.savedPass=this.password;const t={"CpanelIntegrator::CpanelHost":e.CpanelHost,"CpanelIntegrator::CpanelPort":e.CpanelPort,"CpanelIntegrator::CpanelUser":e.CpanelUser,"CpanelIntegrator::CpanelHasPassword":""!==this.password};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t}),P.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else P.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,P.Z.showError(R.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings(){this.loading=!0;const e={TenantId:this.tenantId};S.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"GetSettings",parameters:e}).then((e=>{if(this.loading=!1,e){const t={"CpanelIntegrator::CpanelHost":L.Z.pString(e.CpanelHost),"CpanelIntegrator::CpanelPort":L.Z.pInt(e.CpanelPort),"CpanelIntegrator::CpanelUser":L.Z.pString(e.CpanelUser),"CpanelIntegrator::CpanelHasPassword":L.Z.pBool(e.CpanelHasPassword)};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t})}}),(e=>{P.Z.showError(R.Z.getTextFromResponse(e))}))}}};var q=a(1639),D=a(6663),y=a(4458),H=a(3190),U=a(6611),O=a(8879),f=a(854),B=a(8289),G=a(9984),W=a.n(G);const V=(0,q.Z)(b,[["render",v]]),$=V;W()(b,"components",{QScrollArea:D.Z,QCard:y.Z,QCardSection:H.Z,QInput:U.Z,QBtn:O.Z,QInnerLoading:f.Z,QLinearProgress:B.Z});var x=a(6970);const Q=e=>((0,o.dD)("data-v-50329738"),e=e(),(0,o.Cn)(),e),k={class:"q-pa-lg"},F={class:"row q-mb-md"},K={class:"col text-h5"},j={class:"row q-mb-md"},M={class:"col-2 q-mt-sm"},z={class:"col-3"},Y=Q((()=>(0,o._)("div",{class:"q-ml-sm q-mr-xs"},[(0,o._)("span",{class:"text-h6"},[(0,o._)("b",null,"@")])],-1))),J={class:"col-3 q-mt-xs q-ml-md"},X={class:"row q-mb-md"},ee=Q((()=>(0,o._)("div",{class:"col-2"},null,-1))),te={class:"col-5"},ae=["value"],se={class:"col-3 q-mt-xs q-ml-md",style:{position:"relative"}},ne={style:{position:"absolute",bottom:"3px"}};function le(e,t,a,s,n,l){const r=(0,o.up)("q-input"),d=(0,o.up)("q-select"),p=(0,o.up)("q-btn"),c=(0,o.up)("q-card-section"),m=(0,o.up)("q-card"),h=(0,o.up)("q-linear-progress"),u=(0,o.up)("q-inner-loading"),g=(0,o.up)("q-scroll-area"),C=(0,o.Q2)("t");return(0,o.wg)(),(0,o.j4)(g,{class:"full-height full-width"},{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o._)("div",F,[(0,o.wy)((0,o._)("div",K,null,512),[[C,"CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES"]])]),(0,o.Wm)(m,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",j,[(0,o.wy)((0,o._)("div",M,null,512),[[C,"CPANELINTEGRATOR.LABEL_ALIAS"]]),(0,o._)("div",z,[(0,o.Wm)(r,{outlined:"",dense:"","bg-color":"white",modelValue:n.aliasName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.aliasName=e)},null,8,["modelValue"])]),Y,(0,o._)("div",null,[(0,o.Wm)(d,{outlined:"",dense:"","bg-color":"white",class:"domains-select",modelValue:n.selectedDomain,"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedDomain=e),options:l.domains,"option-label":"name"},null,8,["modelValue","options"])]),(0,o._)("div",J,[(0,o.Wm)(p,{unelevated:"","no-caps":"","no-wrap":"",dense:"",class:"q-ml-md q-px-sm",disable:!n.aliasName.length,ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_ADD_NEW_ALIAS"),onClick:l.addNewAlias},null,8,["disable","label","onClick"])])]),(0,o._)("div",X,[ee,(0,o._)("div",te,[(0,o.wy)((0,o._)("select",{size:"9",class:"select",multiple:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedAliases=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.aliasesList,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e},(0,x.zw)(e),9,ae)))),128))],512),[[i.bM,n.selectedAliases]])]),(0,o._)("div",se,[(0,o._)("div",ne,[(0,o.Wm)(p,{unelevated:"","no-caps":"","no-wrap":"",dense:"",class:"q-ml-md q-px-sm",ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_DELETE_ALIASES"),onClick:l.deleteAliasesList},null,8,["label","onClick"])])])])])),_:1})])),_:1})]),(0,o.Wm)(u,{style:{"justify-content":"flex-start"},showing:n.loading||n.saving||n.deleting},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{query:""})])),_:1},8,["showing"])])),_:1})}var oe=a(4409),ie=a.n(oe);const re={name:"CpanelAliasesAdminSettingsPerUser",data(){return{loading:!1,saving:!1,deleting:!1,aliasName:"",selectedDomain:null,selectedAliases:[],aliasesList:[],user:null}},computed:{currentTenantId(){return this.$store.getters["tenants/getCurrentTenantId"]},domains(){const e=this.$store.getters["maildomains/getDomains"];return L.Z.pArray(e[this.currentTenantId])}},watch:{domains(){this.domains.length>0&&(this.selectedDomain=this.domains[0])}},beforeRouteLeave(e,t,a){this.$root.doBeforeRouteLeave(e,t,a)},mounted(){this.requestDomains(),this.parseRoute(),null===this.selectedDomain&&this.domains.length>0&&(this.selectedDomain=this.domains[0])},methods:{hasChanges(){return""!==this.aliasName},revertChanges(){this.aliasName=""},requestDomains(){this.$store.dispatch("maildomains/requestDomainsIfNecessary",{tenantId:this.currentTenantId})},parseRoute(){const e=L.Z.pPositiveInt(this.$route?.params?.id);this.user?.id!==e&&(this.user={id:e},this.populate())},populate(){this.getSettings()},addNewAlias(){if(!this.saving){this.saving=!0;const e={UserId:this.user?.id,AliasName:this.aliasName,AliasDomain:this.selectedDomain?.name,TenantId:this.currentTenantId};S.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"AddNewAlias",parameters:e}).then((e=>{this.saving=!1,!0===e?(this.aliasName="",this.populate()):P.Z.showError(this.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED"))}),(e=>{this.saving=!1,P.Z.showError(R.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED")))}))}},deleteAliasesList(){if(!this.deleting)if(this.deleting=!0,this.selectedAliases.length){const e={UserId:this.user?.id,Aliases:this.selectedAliases,TenantId:this.tenantId};S.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"DeleteAlias",parameters:e}).then((e=>{this.deleting=!1,!0===e&&this.populate()}),(e=>{this.deleting=!1,P.Z.showError(R.Z.getTextFromResponse(e))}))}else this.deleting=!1,P.Z.showError(this.$t("CPANELINTEGRATOR.ERROR_EMPTY_ALIASES"))},getSettings(){this.loading=!0;const e={UserId:this.user?.id,TenantId:this.currentTenantId};S.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"GetAliases",parameters:e}).then((e=>{this.loading=!1,ie().isArray(e.Aliases)&&(this.aliasesList=e.Aliases)}),(e=>{this.loading=!1,P.Z.showError(R.Z.getTextFromResponse(e))}))}}};var de=a(8401);const pe=(0,q.Z)(re,[["render",le],["__scopeId","data-v-50329738"]]),ce=pe;W()(re,"components",{QScrollArea:D.Z,QCard:y.Z,QCardSection:H.Z,QInput:U.Z,QSelect:de.Z,QBtn:O.Z,QInnerLoading:f.Z,QLinearProgress:B.Z});const me={moduleName:"CpanelIntegrator",requiredModules:[],init(e){n.Z.init(e)},getAdminSystemTabs(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"cpanel",component:()=>a.e(847).then(a.bind(a,847))}]}]},getAdminTenantTabs(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"id/:id/cpanel",component:$},{path:"search/:search/id/:id/cpanel",component:$},{path:"page/:page/id/:id/cpanel",component:$},{path:"search/:search/page/:page/id/:id/cpanel",component:$}]}]},getAdminUserTabs(){const e=l["default"].getters["user/isUserSuperAdmin"];return s.Z.isModuleAvailable("MailDomains")&&e?[{tabName:"cpanel-aliases",tabTitle:"CPANELINTEGRATOR.LABEL_SETTINGS_TAB_ALIASES",tabRouteChildren:[{path:"id/:id/cpanel-aliases",component:ce},{path:"search/:search/id/:id/cpanel-aliases",component:ce},{path:"page/:page/id/:id/cpanel-aliases",component:ce},{path:"search/:search/page/:page/id/:id/cpanel-aliases",component:ce}]}]:[]}}},5885:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(4409),n=a.n(s),l=a(4089);class o{constructor(e){const t=l.Z.pObject(e.CpanelIntegrator);n().isEmpty(t)||(this.allowAliases=l.Z.pBool(t.AllowAliases),this.allowCreateDeleteAccountOnCpanel=l.Z.pBool(t.AllowCreateDeleteAccountOnCpanel),this.cpanelHasPassword=l.Z.pBool(t.CpanelHasPassword),this.cpanelHost=l.Z.pString(t.CpanelHost),this.panelPort=l.Z.pString(t.CpanelPort),this.panelUser=l.Z.pString(t.CpanelUser))}saveCpanelSettings({cpanelHasPassword:e,cpanelHost:t,panelPort:a,panelUser:s}){this.cpanelHasPassword=e,this.cpanelHost=t,this.panelPort=a,this.panelUser=s}}let i=null;const r={init(e){i=new o(e)},saveCpanelSettings(e){i.saveCpanelSettings(e)},getCpanelSettings(){return{allowAliases:i.allowAliases,allowCreateDeleteAccountOnCpanel:i.allowCreateDeleteAccountOnCpanel,cpanelHasPassword:i.cpanelHasPassword,cpanelHost:i.cpanelHost,panelPort:i.panelPort,panelUser:i.panelUser}}}}}]);