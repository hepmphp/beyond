"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[870],{2870:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var l=s(9835),i=s(6970);const o={class:"q-pa-lg",style:{"min-width":"811px"}},a={class:"row q-mb-md"},n={class:"col text-h5"},g={class:"row q-mb-md"},r={class:"row q-mb-md"},L={class:"col-1 q-my-sm"},E={class:"col-2 q-ml-xl"},m={class:"row q-mb-md"},d={class:"q-ml-md"},c={class:"q-ml-md"},p={class:"col-1 q-my-sm"},u={class:"row q-mb-md"},v={class:"q-ml-md"},h={class:"q-ml-md"},S={class:"row q-mb-md"},_={class:"row"},N={class:"q-ml-md"},T={class:"q-ml-md"},I={key:0,class:"row q-mt-md q-mb-sm"},G={class:"col-10"},O=["onClick"],W={key:1,class:"row"},w={class:"q-ml-md"},b={class:"q-pt-md text-right"};function B(e,t,s,B,R,y){const C=(0,l.up)("q-checkbox"),V=(0,l.up)("q-select"),q=(0,l.up)("q-btn"),f=(0,l.up)("q-item-label"),Z=(0,l.up)("q-tooltip"),F=(0,l.up)("q-card-section"),A=(0,l.up)("q-card"),z=(0,l.up)("q-linear-progress"),x=(0,l.up)("q-inner-loading"),U=(0,l.up)("q-scroll-area"),k=(0,l.Q2)("t");return(0,l.wg)(),(0,l.j4)(U,{class:"full-height full-width"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",a,[(0,l.wy)((0,l._)("div",n,null,512),[[k,"LOGSVIEWERWEBCLIENT.HEADING_SETTINGS_TAB"]])]),(0,l.Wm)(A,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l.Wm)(C,{dense:"",modelValue:R.enableLogging,"onUpdate:modelValue":t[0]||(t[0]=e=>R.enableLogging=e)},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("span",null,null,512),[[k,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ENABLE"]])])),_:1},8,["modelValue"])]),(0,l._)("div",r,[(0,l.wy)((0,l._)("div",L,null,512),[[k,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_VERBOSITY"]]),(0,l._)("div",E,[(0,l.Wm)(V,{flat:"",outlined:"",dense:"","bg-color":"white",modelValue:R.verbosity,"onUpdate:modelValue":t[1]||(t[1]=e=>R.verbosity=e),options:y.verbosityList},null,8,["modelValue","options"])])]),(0,l._)("div",m,[(0,l._)("div",null,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_DOWNLOAD",{SIZE:R.viewLogSizeBytes}),onClick:t[2]||(t[2]=e=>y.getLogFile(R.logFileName,R.LogType.default))},null,8,["label"])]),(0,l._)("div",d,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:y.viewLogText,onClick:t[3]||(t[3]=e=>y.getLog(R.LogType.default))},null,8,["label"])]),(0,l._)("div",c,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR"),onClick:t[4]||(t[4]=e=>y.clearLog(R.LogType.default))},null,8,["label"])])]),(0,l.wy)((0,l._)("div",p,null,512),[[k,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ERROR_LOG"]]),(0,l._)("div",u,[(0,l._)("div",null,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_DOWNLOAD_ERRORS",{SIZE:R.viewErrorLogSizeBytes}),onClick:t[5]||(t[5]=e=>y.getLogFile(R.errorLogFileName,R.LogType.error))},null,8,["label"])]),(0,l._)("div",v,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:y.viewErrorsLogText,onClick:t[6]||(t[6]=e=>y.getLog(R.LogType.error))},null,8,["label"])]),(0,l._)("div",h,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR"),onClick:t[7]||(t[7]=e=>y.clearLog(R.LogType.error))},null,8,["label"])])]),(0,l._)("div",S,[(0,l.Wm)(C,{dense:"",modelValue:R.enableEventLogging,"onUpdate:modelValue":t[8]||(t[8]=e=>R.enableEventLogging=e)},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(f,null,null,512),[[k,"LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ENABLE_EVENTS"]])])),_:1},8,["modelValue"])]),(0,l._)("div",_,[(0,l._)("div",null,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_DOWNLOAD_EVENTS",{SIZE:R.viewEventLogSizeBytes}),onClick:t[9]||(t[9]=e=>y.getLogFile(R.eventLogFileName,R.LogType.event))},null,8,["label"])]),(0,l._)("div",N,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:y.viewEventsLogText,onClick:t[10]||(t[10]=e=>y.getLog(R.LogType.event))},null,8,["label"])]),(0,l._)("div",T,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR"),onClick:t[11]||(t[11]=e=>y.clearLog(R.LogType.event))},null,8,["label"])])]),R.users.length?((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("div",G,[(0,l._)("div",null,[(0,l.Uk)((0,i.zw)(e.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_USERS_WITH_SEPARATE_LOG"))+" ",1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(R.users,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"q-ml-sm",style:{"list-style-type":"none"},key:t},[(0,l._)("span",{class:"logging-user__link",onClick:e=>y.getLogFile(R.logFileName,!1,t)},[(0,l.Uk)((0,i.zw)(t)+" ",1),(0,l.Wm)(Z,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("LOGSVIEWERWEBCLIENT.INFO_LOGGING_CLICK_TO_DOWNLOAD")),1)])),_:1})],8,O)])))),128))])])])):(0,l.kq)("",!0),R.users.length?((0,l.wg)(),(0,l.iD)("div",W,[(0,l._)("div",null,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_TURN_OFF_SEPARATE_LOGS"),onClick:y.turnOffSeparateLogs},null,8,["label","onClick"])]),(0,l._)("div",w,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_CLEAR_SEPARATE_LOGS"),onClick:y.clearSeparateLogs},null,8,["label","onClick"])])])):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l._)("div",b,[(0,l.Wm)(q,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:y.save,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])]),(0,l.Wm)(x,{style:{"justify-content":"flex-start"},showing:R.saving},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{query:""})])),_:1},8,["showing"])])),_:1})}var R=s(9336),y=s(1427),C=s(6390),V=s(2456),q=s(1088);const f={LogType:{debug:"",error:"error-",event:"event-"}},Z={name:"LoggingAdminSettings",data(){return{verbosity:"",logFileData:{},logSizeBytes:0,eventLogSizeBytes:0,errorLogSizeBytes:0,viewLastLogSize:0,viewLogSizeBytes:0,viewEventLogSizeBytes:0,viewErrorLogSizeBytes:0,logFileName:"",eventLogFileName:"",errorLogFileName:"",enableLogging:!1,enableEventLogging:!1,loggingLevel:100,users:[],timeOut:!1,saving:!1,downloadingLogs:!1,cleaningLogs:!1,viewLogs:!1,turningOffSeparateLogs:!1,LogType:f.LogType}},mounted(){this.populate(),this.getLogFilesData(),this.getUsersWithSeparateLog()},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},computed:{verbosityList(){return[{value:100,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_DEBUG")},{value:50,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_WARNINGS")},{value:20,label:this.$t("LOGSVIEWERWEBCLIENT.LABEL_LOGGING_ERRORS")}]},viewLogText(){return this.logSizeBytes<this.viewLastLogSize?this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW"):this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW_LAST",{SIZE:C.Z.getFriendlySize(this.viewLastLogSize)})},viewEventsLogText(){return this.eventLogSizeBytes<this.viewLastLogSize?this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW"):this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW_LAST",{SIZE:C.Z.getFriendlySize(this.viewLastLogSize)})},viewErrorsLogText(){return this.errorLogSizeBytes<this.viewLastLogSize?this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW"):this.$t("LOGSVIEWERWEBCLIENT.BUTTON_LOGGING_VIEW_LAST",{SIZE:C.Z.getFriendlySize(this.viewLastLogSize)})}},beforeDestroy(){clearTimeout(this.timeOut)},methods:{hasChanges(){const e=q.Z.getLoggingData();return this.enableLogging!==e.enableLogging||this.enableEventLogging!==e.enableEventLogging||this.verbosity.value!==e.loggingLevel},revertChanges(){this.populate()},populate(){const e=q.Z.getLoggingData();this.enableLogging=e.enableLogging,this.enableEventLogging=e.enableEventLogging,this.viewLastLogSize=e.viewLastLogSize,this.verbosityList.forEach((t=>{t.value===e.loggingLevel&&(this.verbosity=t)}))},save(){if(!this.saving){this.saving=!0;const e={EnableLogging:this.enableLogging,EnableEventLogging:this.enableEventLogging,LoggingLevel:this.verbosity.value};V.Z.sendRequest({moduleName:"Core",methodName:"UpdateSettings",parameters:e}).then((e=>{this.saving=!1,e?(q.Z.saveLoggingData({enableLogging:this.enableLogging,enableEventLogging:this.enableEventLogging,loggingLevel:this.verbosity.value}),y.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):y.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,y.Z.showError(R.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getLogFilesData(){V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetLogFilesData"}).then((e=>{e&&(this.logSizeBytes=e.LogSizeBytes,this.eventLogSizeBytes=e.EventLogSizeBytes,this.errorLogSizeBytes=e.ErrorLogSizeBytes,this.viewLogSizeBytes=C.Z.getFriendlySize(e.LogSizeBytes),this.viewEventLogSizeBytes=C.Z.getFriendlySize(e.EventLogSizeBytes),this.viewErrorLogSizeBytes=C.Z.getFriendlySize(e.ErrorLogSizeBytes),this.logFileName=e.LogFileName,this.eventLogFileName=e.EventLogFileName,this.errorLogFileName=e.ErrorLogFileName),this.setUpdateStatusTimer()}))},setUpdateStatusTimer(){clearTimeout(this.timeOut),this._isDestroyed||(this.timeOut=setTimeout(this.getLogFilesData,5e3))},getUsersWithSeparateLog(){const e={};V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetUsersWithSeparateLog",parameters:e}).then((e=>{e&&(this.users=e)}),(e=>{y.Z.showError(R.Z.getTextFromResponse(e))}))},getLog(e){if(!this.viewLogs){this.viewLogs=!0;const t={FilePrefix:e};V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"GetLog",parameters:t}).then((e=>{if(this.viewLogs=!1,e){const t=window.open("","view-log","scrollbars=1");t.document.write("<pre>"+e+"</pre>")}}),(e=>{this.viewLogs=!1,y.Z.showError(R.Z.getTextFromResponse(e))}))}},getLogFile(e,t,s=""){if(!this.downloadingLogs){this.downloadingLogs=!0;const l={FilePrefix:t,PublicId:s};s&&(e=s+"-"+e),V.Z.downloadExportFile({moduleName:"LogsViewerWebclient",methodName:"GetLogFile",parameters:l,fileName:e,format:"Raw"}).then((()=>{this.downloadingLogs=!1}))}},clearLog(e){if(!this.cleaningLogs){this.cleaningLogs=!0;const t={FilePrefix:e};V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"ClearLog",parameters:t}).then((()=>{this.cleaningLogs=!1}),(e=>{this.cleaningLogs=!1,y.Z.showError(R.Z.getTextFromResponse(e))}))}},turnOffSeparateLogs(){this.turningOffSeparateLogs||(this.turningOffSeparateLogs=!0,V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"TurnOffSeparateLogs"}).then((e=>{!0===e&&this.getUsersWithSeparateLog(),this.turningOffSeparateLogs=!1}),(()=>{this.turningOffSeparateLogs=!1})))},clearSeparateLogs(){this.cleaningLogs||(this.cleaningLogs=!0,V.Z.sendRequest({moduleName:"LogsViewerWebclient",methodName:"ClearSeparateLogs"}).then((e=>{this.cleaningLogs=!1,!0===e?y.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS")):y.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.cleaningLogs=!1,y.Z.showError(R.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))})))}}};var F=s(1639),A=s(6663),z=s(4458),x=s(3190),U=s(6937),k=s(8401),D=s(8879),$=s(3115),P=s(6858),Q=s(854),H=s(8289),j=s(9984),K=s.n(j);const Y=(0,F.Z)(Z,[["render",B],["__scopeId","data-v-4116da2e"]]),J=Y;K()(Z,"components",{QScrollArea:A.Z,QCard:z.Z,QCardSection:x.Z,QCheckbox:U.Z,QSelect:k.Z,QBtn:D.Z,QItemLabel:$.Z,QTooltip:P.Z,QInnerLoading:Q.Z,QLinearProgress:H.Z})}}]);