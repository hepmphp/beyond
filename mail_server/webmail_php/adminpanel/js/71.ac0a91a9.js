"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[71],{7071:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Jt});var l=s(3444),a=s(8936),r=s(9835),i=s(6970),n=s(1957);const o={class:"full-height full-width"},c={class:"q-pa-lg"},m={class:"row q-mb-md"},d={class:"col text-h5"},p={key:0,class:"col text-right"},h={key:0,class:"relative-position"},u={key:0,class:"text-grey-6"},S={key:1,class:"flex flex-left q-mb-lg"},E={key:2,style:{height:"150px"}},A={key:0,class:"row q-mb-md"},v={class:"col-2 q-my-sm q-pl-sm required-field"},I={class:"col-5"},L={class:"row"},_={class:"col-2 q-my-sm q-pl-sm required-field"},g={class:"col-5"},T={class:"row q-mt-sm q-mb-lg"},w=(0,r._)("div",{class:"col-2"},null,-1),b={class:"col-9"},P={key:1,class:"row"},x={class:"col-2"},C={class:"col-3 textarea"},N={key:2,class:"row q-mt-sm q-mb-lg"},M=(0,r._)("div",{class:"col-2"},null,-1),W={class:"col-9"},q={class:"row q-mb-md"},R={class:"col-2 q-my-sm q-pl-sm required-field"},y={class:"col-3"},U={class:"col-1 q-my-sm text-right q-pr-md q-pl-sm required-field"},B={class:"col-1"},V={class:"col-1 q-my-sm q-pl-md"},f={class:"row q-mb-md"},D={class:"col-2 q-my-sm q-pl-sm required-field"},O={class:"col-3"},Z={class:"col-1 q-my-sm text-right q-pr-md q-pl-sm required-field"},k={class:"col-1"},$={class:"col-1 q-my-sm q-pl-md"},F={class:"row q-mb-md"},G=(0,r._)("div",{class:"col-2"},null,-1),Q={class:"col-6"},H={class:"row q-mb-md"},j=(0,r._)("div",{class:"col-2"},null,-1),Y={class:"col-5"},z={class:"row q-mb-md"},K={class:"col-2 q-my-sm"},X={class:"col-5"},J={class:"row q-mb-md"},ee=(0,r._)("div",{class:"col-2"},null,-1),te={class:"col-5"},se={class:"row q-mb-sm"},le=(0,r._)("div",{class:"col-2"},null,-1),ae={class:"col-5"},re={class:"row"},ie=(0,r._)("div",{class:"col-2"},null,-1),ne={class:"col-5"},oe={class:"row q-mb-sm"},ce={class:"col-10"},me={class:"row q-mb-md"},de={class:"col-10"},pe={class:"row q-mb-md"},he={class:"col-3"},ue={class:"col-1"},Se={class:"col-1"},Ee={class:"col-1 q-my-sm q-pl-md"},Ae={class:"row q-mb-md"},ve={class:"col-3"},Ie={class:"col-1"},Le={class:"col-1"},_e={class:"col-1 q-my-sm q-pl-md"},ge={class:"row"},Te={class:"col-3"},we={class:"col-1"},be={class:"col-1"},Pe={class:"col-1 q-my-sm q-pl-md"},xe={class:"row"},Ce={class:"col-6"},Ne={key:4,class:"q-pt-md text-right"};function Me(e,t,s,l,a,Me){const We=(0,r.up)("q-btn"),qe=(0,r.up)("q-item-label"),Re=(0,r.up)("q-item-section"),ye=(0,r.up)("q-item"),Ue=(0,r.up)("q-list"),Be=(0,r.up)("q-input"),Ve=(0,r.up)("q-pagination"),fe=(0,r.up)("q-card-section"),De=(0,r.up)("q-card"),Oe=(0,r.up)("q-select"),Ze=(0,r.up)("q-checkbox"),ke=(0,r.up)("q-radio"),$e=(0,r.up)("ConfirmDialog"),Fe=(0,r.up)("q-scroll-area"),Ge=(0,r.up)("q-linear-progress"),Qe=(0,r.up)("q-inner-loading"),He=(0,r.Q2)("t");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(Fe,{class:"full-height full-width"},{default:(0,r.w5)((()=>[(0,r._)("div",c,[(0,r._)("div",m,[(0,r.wy)((0,r._)("div",d,null,512),[[He,"MAILWEBCLIENT.HEADING_SERVERS_SETTINGS"]]),a.createMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(We,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:Me.addNewServer,label:e.$t("MAILWEBCLIENT.ACTION_ADD_NEW_SERVER")},null,8,["onClick","label"])]))]),a.createMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",h,[a.servers.length>0?((0,r.wg)(),(0,r.j4)(Ue,{key:0,dense:"",bordered:"",separator:"",class:"rounded-borders q-mb-md",style:{overflow:"hidden"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.servers,(t=>((0,r.wg)(),(0,r.j4)(ye,{clickable:"",class:(0,i.C_)(a.currentServerId===t.id?"bg-grey-4":"bg-white"),key:t.id,onClick:e=>Me.route(t.id)},{default:(0,r.w5)((()=>[(0,r.Wm)(Re,null,{default:(0,r.w5)((()=>[(0,r.Wm)(qe,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.name)+" ",1),t.tenantName?((0,r.wg)(),(0,r.iD)("span",u,(0,i.zw)(e.$t("MAILWEBCLIENT.LABEL_HINT_SERVERS_TENANTNAME",{TENANTNAME:t.tenantName})),1)):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1024),(0,r.Wm)(Re,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(We,{dense:"",flat:"","no-caps":"",color:"negative",class:"no-hover",label:e.$t("COREWEBCLIENT.ACTION_DELETE"),onClick:(0,n.iM)((e=>Me.askDeleteServer(t.name,t.id,t.tenantId)),["stop"])},null,8,["label","onClick"])])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):(0,r.kq)("",!0),a.showSearch||Me.showPagination?((0,r.wg)(),(0,r.iD)("div",S,[a.showSearch?((0,r.wg)(),(0,r.j4)(Be,{key:0,rounded:"",outlined:"",dense:"","bg-color":"white",modelValue:a.enteredSearch,"onUpdate:modelValue":t[0]||(t[0]=e=>a.enteredSearch=e),onKeyup:(0,n.D2)(Me.route,["enter"])},{append:(0,r.w5)((()=>[(0,r.Wm)(We,{dense:"",flat:"",ripple:!1,icon:"search",onClick:Me.route},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])):(0,r.kq)("",!0),Me.showPagination?((0,r.wg)(),(0,r.j4)(Ve,{key:1,flat:"","active-color":"primary",color:"grey-6",modelValue:a.selectedPage,"onUpdate:modelValue":t[1]||(t[1]=e=>a.selectedPage=e),max:Me.pagesCount},null,8,["modelValue","max"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),0===a.servers.length&&a.loadingServers?((0,r.wg)(),(0,r.iD)("div",E)):(0,r.kq)("",!0),0!==a.servers.length||a.loadingServers||""!==a.search?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(De,{key:3,flat:"",bordered:"",class:"card-edit-settings"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(fe,{class:"text-caption"},null,512),[[He,"MAILWEBCLIENT.INFO_NO_SERVERS"]])])),_:1})),0!==a.servers.length||a.loadingServers||""===a.search?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(De,{key:4,flat:"",bordered:"",class:"card-edit-settings"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(fe,{class:"text-caption"},null,512),[[He,"MAILWEBCLIENT.INFO_NO_SERVERS_FOUND"]])])),_:1}))])),a.showServerFields||a.createMode?((0,r.wg)(),(0,r.j4)(De,{key:1,flat:"",bordered:"",class:"card-edit-settings"},{default:(0,r.w5)((()=>[(0,r.Wm)(fe,null,{default:(0,r.w5)((()=>[a.createMode&&a.tenantOptions.length>1?((0,r.wg)(),(0,r.iD)("div",A,[(0,r.wy)((0,r._)("div",v,null,512),[[He,"MAILWEBCLIENT.LABEL_TENANT"]]),(0,r._)("div",I,[(0,r.Wm)(Oe,{outlined:"",dense:"","bg-color":"white",modelValue:a.selectedTenantId,"onUpdate:modelValue":t[2]||(t[2]=e=>a.selectedTenantId=e),"emit-value":"","map-options":"",options:a.tenantOptions},null,8,["modelValue","options"])])])):(0,r.kq)("",!0),(0,r._)("div",L,[(0,r.wy)((0,r._)("div",_,null,512),[[He,"MAILWEBCLIENT.LABEL_DISPLAY_NAME"]]),(0,r._)("div",g,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.serverName,"onUpdate:modelValue":t[3]||(t[3]=e=>a.serverName=e),ref:"serverName"},null,8,["modelValue"])])]),(0,r._)("div",T,[w,(0,r._)("div",b,[(0,r.wy)((0,r.Wm)(qe,{caption:""},null,512),[[He,"MAILWEBCLIENT.LABEL_HINT_DISPLAY_NAME"]])])]),a.allowEditDomainsInServer||!a.createMode?((0,r.wg)(),(0,r.iD)("div",P,[(0,r.wy)((0,r._)("div",x,null,512),[[He,"MAILWEBCLIENT.LABEL_DOMAINS"]]),(0,r._)("div",C,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",type:"textarea",rows:"2",modelValue:a.domains,"onUpdate:modelValue":t[4]||(t[4]=e=>a.domains=e),ref:"domains",disable:!a.allowEditDomainsInServer},null,8,["modelValue","disable"])])])):(0,r.kq)("",!0),a.allowEditDomainsInServer||!a.createMode?((0,r.wg)(),(0,r.iD)("div",N,[M,(0,r._)("div",W,[a.allowEditDomainsInServer?(0,r.wy)(((0,r.wg)(),(0,r.j4)(qe,{key:0,caption:""},null,512)),[[He,"MAILWEBCLIENT.LABEL_HINT_DOMAINS"]]):(0,r.kq)("",!0),a.allowEditDomainsInServer?(0,r.wy)(((0,r.wg)(),(0,r.j4)(qe,{key:1,caption:"",class:"text-weight-bold q-mt-md"},null,512)),[[He,"MAILWEBCLIENT.LABEL_HINT_DOMAINS_WILDCARD"]]):(0,r.kq)("",!0),a.allowEditDomainsInServer?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(qe,{key:2,caption:"",innerHTML:e.$t("MAILWEBCLIENT.LABEL_HINT_DOMAINS_CANNOT_EDIT_HTML")},null,8,["innerHTML"]))])])):(0,r.kq)("",!0),(0,r._)("div",q,[(0,r.wy)((0,r._)("div",R,null,512),[[He,"MAILWEBCLIENT.LABEL_IMAP_SERVER"]]),(0,r._)("div",y,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.imapServer,"onUpdate:modelValue":t[5]||(t[5]=e=>a.imapServer=e),ref:"imapServer",onBlur:Me.fillUpSmtpServerFromImapServer},null,8,["modelValue","onBlur"])]),(0,r.wy)((0,r._)("div",U,null,512),[[He,"MAILWEBCLIENT.LABEL_PORT"]]),(0,r._)("div",B,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.imapPort,"onUpdate:modelValue":t[6]||(t[6]=e=>a.imapPort=e),ref:"imapPort"},null,8,["modelValue"])]),(0,r._)("div",V,[(0,r.Wm)(Ze,{dense:"",modelValue:a.imapSsl,"onUpdate:modelValue":t[7]||(t[7]=e=>a.imapSsl=e),label:"SSL"},null,8,["modelValue"])])]),(0,r._)("div",f,[(0,r.wy)((0,r._)("div",D,null,512),[[He,"MAILWEBCLIENT.LABEL_SMTP_SERVER"]]),(0,r._)("div",O,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.smtpServer,"onUpdate:modelValue":t[8]||(t[8]=e=>a.smtpServer=e),ref:"smtpServer"},null,8,["modelValue"])]),(0,r.wy)((0,r._)("div",Z,null,512),[[He,"MAILWEBCLIENT.LABEL_PORT"]]),(0,r._)("div",k,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.smtpPort,"onUpdate:modelValue":t[9]||(t[9]=e=>a.smtpPort=e),ref:"smtpPort"},null,8,["modelValue"])]),(0,r._)("div",$,[(0,r.Wm)(Ze,{dense:"",modelValue:a.smtpSsl,"onUpdate:modelValue":t[10]||(t[10]=e=>a.smtpSsl=e),label:e.$t("MAILWEBCLIENT.LABEL_SSL")},null,8,["modelValue","label"])])]),(0,r._)("div",F,[G,(0,r._)("div",Q,[(0,r.wy)((0,r.Wm)(qe,null,null,512),[[He,"MAILWEBCLIENT.LABEL_SMTP_AUTHENTICATION"]]),(0,r.Wm)(Ue,{dense:""},{default:(0,r.w5)((()=>[(0,r.Wm)(ye,{"manual-focus":""},{default:(0,r.w5)((()=>[(0,r.Wm)(Re,{class:"q-pr-none"},{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(ke,{dense:"",modelValue:a.smtpAuthentication,"onUpdate:modelValue":t[11]||(t[11]=e=>a.smtpAuthentication=e),val:a.smtpAuthTypeEnum.NoAuthentication,label:e.$t("MAILWEBCLIENT.LABEL_NO_AUTHENTICATION")},null,8,["modelValue","val","label"])])])),_:1})])),_:1}),(0,r.Wm)(ye,{"manual-focus":""},{default:(0,r.w5)((()=>[(0,r.Wm)(Re,{avatar:""},{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(ke,{dense:"",modelValue:a.smtpAuthentication,"onUpdate:modelValue":t[12]||(t[12]=e=>a.smtpAuthentication=e),val:a.smtpAuthTypeEnum.UseSpecifiedCredentials,label:e.$t("MAILWEBCLIENT.LABEL_USE_SPECIFIED_CREDENTIALS")},null,8,["modelValue","val","label"])])])),_:1}),(0,r.Wm)(Re,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.smtpLogin,"onUpdate:modelValue":t[13]||(t[13]=e=>a.smtpLogin=e),placeholder:e.$t("COREWEBCLIENT.LABEL_LOGIN")},null,8,["modelValue","placeholder"])])),_:1}),(0,r.Wm)(Re,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:a.smtpPassword,"onUpdate:modelValue":t[14]||(t[14]=e=>a.smtpPassword=e),placeholder:e.$t("COREWEBCLIENT.LABEL_PASSWORD")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),(0,r.Wm)(ye,{"manual-focus":""},{default:(0,r.w5)((()=>[(0,r.Wm)(Re,null,{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(ke,{dense:"",modelValue:a.smtpAuthentication,"onUpdate:modelValue":t[15]||(t[15]=e=>a.smtpAuthentication=e),val:a.smtpAuthTypeEnum.UseUserCredentials,label:e.$t("MAILWEBCLIENT.LABEL_USE_USER_CREDENTIALS")},null,8,["modelValue","val","label"])])])),_:1})])),_:1})])),_:1})])]),(0,r._)("div",H,[j,(0,r._)("div",Y,[(0,r.Wm)(Ze,{dense:"",modelValue:a.enableSieve,"onUpdate:modelValue":t[16]||(t[16]=e=>a.enableSieve=e),label:e.$t("MAILWEBCLIENT.LABEL_ENABLE_SIEVE")},null,8,["modelValue","label"])])]),(0,r._)("div",z,[(0,r.wy)((0,r._)("div",K,null,512),[[He,"MAILWEBCLIENT.LABEL_SIEVE_PORT"]]),(0,r._)("div",X,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.sievePort,"onUpdate:modelValue":t[17]||(t[17]=e=>a.sievePort=e)},null,8,["modelValue"])])]),(0,r._)("div",J,[ee,(0,r._)("div",te,[(0,r.Wm)(Ze,{dense:"",modelValue:a.useThreading,"onUpdate:modelValue":t[18]||(t[18]=e=>a.useThreading=e),label:e.$t("MAILWEBCLIENT.LABEL_USE_THREADING")},null,8,["modelValue","label"])])]),(0,r._)("div",se,[le,(0,r._)("div",ae,[(0,r.Wm)(Ze,{dense:"",modelValue:a.useFullEmail,"onUpdate:modelValue":t[19]||(t[19]=e=>a.useFullEmail=e),label:e.$t("MAILWEBCLIENT.LABEL_USE_FULL_EMAIL_ADDRESS_AS_LOGIN")},null,8,["modelValue","label"])])]),(0,r._)("div",re,[ie,(0,r._)("div",ne,[(0,r.wy)((0,r.Wm)(qe,{caption:""},null,512),[[He,e.$t("MAILWEBCLIENT.LABEL_HINT_USE_FULL_EMAIL_ADDRESS_AS_LOGIN")]])])])])),_:1})])),_:1})):(0,r.kq)("",!0),a.showServerFields||a.createMode?((0,r.wg)(),(0,r.j4)(De,{key:2,flat:"",bordered:"",class:"card-edit-settings q-mt-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(fe,null,{default:(0,r.w5)((()=>[(0,r._)("div",oe,[(0,r._)("div",ce,[(0,r.Wm)(Ze,{dense:"",modelValue:a.setExternalAccessServers,"onUpdate:modelValue":t[20]||(t[20]=e=>a.setExternalAccessServers=e),label:e.$t("MAILWEBCLIENT.LABEL_ADMIN_EXTERNAL_ACCESS_SERVERS")},null,8,["modelValue","label"])])]),(0,r._)("div",me,[(0,r._)("div",de,[(0,r.Wm)(qe,{caption:"",innerHTML:e.$t("MAILWEBCLIENT.LABEL_HINT_ADMIN_EXTERNAL_ACCESS_SERVERS")},null,8,["innerHTML"])])]),(0,r._)("div",pe,[(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-2 q-my-sm",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_IMAP_SERVER"]]),(0,r._)("div",he,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessImapServer,"onUpdate:modelValue":t[21]||(t[21]=e=>a.externalAccessImapServer=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_PORT"]]),(0,r._)("div",ue,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessImapPort,"onUpdate:modelValue":t[22]||(t[22]=e=>a.externalAccessImapPort=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT"]]),(0,r._)("div",Se,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:Me.externalAccessImapAlterPortModel,"onUpdate:modelValue":t[23]||(t[23]=e=>Me.externalAccessImapAlterPortModel=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r._)("div",Ee,[(0,r.Wm)(Ze,{outlined:"",dense:"",modelValue:a.externalAccessImapUseSsl,"onUpdate:modelValue":t[24]||(t[24]=e=>a.externalAccessImapUseSsl=e),label:"SSL",disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])])]),(0,r._)("div",Ae,[(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-2 q-my-sm",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_POP3_SERVER"]]),(0,r._)("div",ve,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessPop3Server,"onUpdate:modelValue":t[25]||(t[25]=e=>a.externalAccessPop3Server=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_PORT"]]),(0,r._)("div",Ie,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessPop3Port,"onUpdate:modelValue":t[26]||(t[26]=e=>a.externalAccessPop3Port=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT"]]),(0,r._)("div",Le,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:Me.externalAccessPop3AlterPortModel,"onUpdate:modelValue":t[27]||(t[27]=e=>Me.externalAccessPop3AlterPortModel=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r._)("div",_e,[(0,r.Wm)(Ze,{outlined:"",dense:"",modelValue:a.externalAccessPop3UseSsl,"onUpdate:modelValue":t[28]||(t[28]=e=>a.externalAccessPop3UseSsl=e),label:"SSL",disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])])]),(0,r._)("div",ge,[(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-2 q-my-sm",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_SMTP_SERVER"]]),(0,r._)("div",Te,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessSmtpServer,"onUpdate:modelValue":t[29]||(t[29]=e=>a.externalAccessSmtpServer=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_PORT"]]),(0,r._)("div",we,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:a.externalAccessSmtpPort,"onUpdate:modelValue":t[30]||(t[30]=e=>a.externalAccessSmtpPort=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r.wy)((0,r._)("div",{class:(0,i.C_)(["col-1 q-my-sm text-right q-pr-md",a.setExternalAccessServers?"":"disabled"])},null,2),[[He,"MAILWEBCLIENT.LABEL_ALTERNATIVE_PORT"]]),(0,r._)("div",be,[(0,r.Wm)(Be,{outlined:"",dense:"","bg-color":"white",modelValue:Me.externalAccessSmtpAlterPortModel,"onUpdate:modelValue":t[31]||(t[31]=e=>Me.externalAccessSmtpAlterPortModel=e),disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])]),(0,r._)("div",Pe,[(0,r.Wm)(Ze,{outlined:"",dense:"",modelValue:a.externalAccessSmtpUseSsl,"onUpdate:modelValue":t[32]||(t[32]=e=>a.externalAccessSmtpUseSsl=e),label:"SSL",disable:!a.setExternalAccessServers},null,8,["modelValue","disable"])])])])),_:1})])),_:1})):(0,r.kq)("",!0),a.oauthConnectorsData.length>0&&(a.showServerFields||a.createMode)?((0,r.wg)(),(0,r.j4)(De,{key:3,flat:"",bordered:"",class:"card-edit-settings q-mt-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(fe,null,{default:(0,r.w5)((()=>[(0,r._)("div",xe,[(0,r._)("div",Ce,[(0,r.wy)((0,r.Wm)(qe,null,null,512),[[He,"MAILWEBCLIENT.INFO_ADMIN_OAUTH"]]),(0,r.Wm)(Ue,{dense:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.oauthConnectorsData,(e=>((0,r.wg)(),(0,r.j4)(ye,{"manual-focus":"",key:e.type},{default:(0,r.w5)((()=>[(0,r.Wm)(Re,{class:"q-pr-none"},{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(ke,{dense:"",modelValue:a.oauthConnector,"onUpdate:modelValue":t[33]||(t[33]=e=>a.oauthConnector=e),val:e.type,label:e.name},null,8,["modelValue","val","label"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])])),_:1})])),_:1})):(0,r.kq)("",!0),a.showServerFields||a.createMode?((0,r.wg)(),(0,r.iD)("div",Ne,[a.createMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(We,{key:0,unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:Me.save,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])),a.createMode?((0,r.wg)(),(0,r.j4)(We,{key:1,unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:Me.create,label:e.$t("COREWEBCLIENT.ACTION_CREATE")},null,8,["onClick","label"])):(0,r.kq)("",!0),a.createMode?((0,r.wg)(),(0,r.j4)(We,{key:2,unelevated:"","no-caps":"",dense:"",class:"q-px-sm q-ml-sm",ripple:!1,color:"secondary",onClick:Me.cancelCreate,label:e.$t("COREWEBCLIENT.ACTION_CANCEL")},null,8,["onClick","label"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)]),(0,r.Wm)($e,{ref:"confirmDialog"},null,512)])),_:1}),(0,r.Wm)(Qe,{style:{"justify-content":"flex-start"},showing:a.loadingServers||a.saving||a.creating},{default:(0,r.w5)((()=>[(0,r.Wm)(Ge,{query:""})])),_:1},8,["showing"])])}s(9665),s(6890);var We=s(4409),qe=s.n(We),Re=s(3203),ye=s(9336),Ue=s(1427),Be=s(4089),Ve=s(2456),fe=s(7665);const De={getServers(e,t,s){return new Promise(((l,a)=>{Ve.Z.sendRequest({moduleName:"Mail",methodName:"GetServers",parameters:{Search:e,Offset:s*(t-1),Limit:s}}).then((a=>{if(qe().isArray(a?.Items)){const r=qe().map(a.Items,(function(e){return new fe.Z(e)})),i=Be.Z.pInt(a.Count);l({servers:r,totalCount:i,search:e,page:t,limit:s})}else l({servers:[],totalCount:0,search:e,page:t,limit:s})}),(a=>{Ue.Z.showError(ye.Z.getTextFromResponse(a)),l({servers:[],totalCount:0,search:e,page:t,limit:s})}))}))}};var Oe=s(3517);const Ze={name:"MailAdminSettings",components:{ConfirmDialog:Oe.Z},data(){return{smtpAuthTypeEnum:l.Z.getSmtpAuthTypeEnum(),allowEditDomainsInServer:l.Z.getAllowEditDomainsInServer(),page:1,search:"",limit:10,servers:[],totalCount:0,loadingServers:!1,showSearch:!1,enteredSearch:"",selectedPage:1,currentServerId:0,currentServerTenantId:0,createMode:!1,showServerFields:!1,selectedTenantId:0,tenantOptions:[],serverName:"",domains:"",imapServer:"",imapPort:0,imapSsl:!1,smtpServer:"",smtpPort:0,smtpSsl:!1,smtpAuthentication:"0",smtpLogin:"",smtpPassword:"",enableSieve:!1,sievePort:0,useThreading:!1,useFullEmail:!1,setExternalAccessServers:!1,externalAccessImapServer:"",externalAccessImapPort:143,externalAccessImapAlterPort:"",externalAccessImapUseSsl:!1,externalAccessPop3Server:"",externalAccessPop3Port:110,externalAccessPop3AlterPort:"",externalAccessPop3UseSsl:!1,externalAccessSmtpServer:"",externalAccessSmtpPort:25,externalAccessSmtpAlterPort:"",externalAccessSmtpUseSsl:!1,oauthConnectorsData:[],oauthConnector:"",saving:!1,creating:!1}},computed:{showPagination(){return this.servers.length<this.totalCount},pagesCount(){return Math.ceil(this.totalCount/this.limit)},externalAccessImapAlterPortModel:{get(){return 0===this.externalAccessImapAlterPort?"":this.externalAccessImapAlterPort},set(e){this.externalAccessImapAlterPort=e}},externalAccessPop3AlterPortModel:{get(){return 0===this.externalAccessPop3AlterPort?"":this.externalAccessPop3AlterPort},set(e){this.externalAccessPop3AlterPort=e}},externalAccessSmtpAlterPortModel:{get(){return 0===this.externalAccessSmtpAlterPort?"":this.externalAccessSmtpAlterPort},set(e){this.externalAccessSmtpAlterPort=e}}},watch:{$route(e,t){this.parseRoute()},selectedPage(){this.selectedPage!==this.page&&this.route()},imapSsl(){this.imapSsl&&143===this.imapPort&&(this.imapPort=993),this.imapSsl||993!==this.imapPort||(this.imapPort=143),this.setExternalAccessServers||(this.externalAccessImapUseSsl=this.imapSsl)},smtpSsl(){this.smtpSsl&&25===this.smtpPort&&(this.smtpPort=465),this.smtpSsl||465!==this.smtpPort||(this.smtpPort=25),this.setExternalAccessServers||(this.externalAccessSmtpUseSsl=this.smtpSsl)},imapServer:function(e){this.setExternalAccessServers||(this.externalAccessImapServer=e)},imapPort:function(e){this.setExternalAccessServers||(this.externalAccessImapPort=e)},smtpServer:function(e){this.setExternalAccessServers||(this.externalAccessSmtpServer=e)},smtpPort:function(e){this.setExternalAccessServers||(this.externalAccessSmtpPort=e)},setExternalAccessServers(){this.setExternalAccessServers||(this.externalAccessImapServer=this.imapServer,this.externalAccessImapPort=this.imapPort,this.externalAccessImapUseSsl=this.imapSsl,this.externalAccessSmtpServer=this.smtpServer,this.externalAccessSmtpPort=this.smtpPort,this.externalAccessSmtpUseSsl=this.smtpSsl)}},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},beforeRouteUpdate(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},mounted(){this.saving=!1,this.creating=!1,this.populate();const e=this.$store.getters["tenants/getTenants"],t=[{label:"system-wide",value:0}];e.length>1&&e.forEach((e=>{t.push({label:e.name,value:e.id})})),this.tenantOptions=t,this.populateOauthConnectorsData(),this.parseRoute()},methods:{route(e=0){const t=""!==this.enteredSearch?"/search/"+this.enteredSearch:"",s=this.search!==this.enteredSearch?1:this.selectedPage,l=s>1?"/page/"+s:"",a=e>0?"/id/"+e:"",r="/system/mail-servers"+t+l+a;r!==this.$route.path&&this.$router.push(r)},parseRoute(){if("/system/mail-servers/create"===this.$route.path)this.createMode=!0,this.showServerFields=!1,this.populateServer();else{this.createMode=!1;const e=Be.Z.pString(this.$route?.params?.search),t=Be.Z.pPositiveInt(this.$route?.params?.page);this.search===e&&this.page===t||(this.search=e,this.enteredSearch=e,this.page=t,this.selectedPage=t,this.populate());const s=Be.Z.pNonNegativeInt(this.$route?.params?.id);this.currentServerId!==s&&(this.currentServerId=s,this.populateServer())}},populateOauthConnectorsData(){const e={oauthConnectorsData:[]};Re.Z.$emit("MailWebclient::GetOauthConnectorsData",e),this.oauthConnectorsData=qe().isArray(e.oauthConnectorsData)?e.oauthConnectorsData.filter((e=>Be.Z.isNonEmptyString(e.name)&&Be.Z.isNonEmptyString(e.type))):[],this.oauthConnectorsData.length>0&&this.oauthConnectorsData.unshift({name:this.$t("MAILWEBCLIENT.LABEL_ADMIN_OAUTH_NOTHING_SELECTED"),type:""})},populate(){this.loadingServers=!0,De.getServers(this.search,this.page,this.limit).then((({servers:e,totalCount:t,page:s,search:l})=>{s===this.page&&l===this.search&&(this.servers=e,this.totalCount=t,""===this.search&&(this.showSearch=t>this.limit),this.loadingServers=!1,0!==this.currentServerId&&this.populateServer())}))},populateServer(){if(this.createMode)this.currentServerId=0,this.selectedTenantId=this.tenantOptions.length>1?this.tenantOptions[1].value:0,this.serverName="",this.domains="",this.imapServer="",this.imapPort=143,this.imapSsl=!1,this.smtpServer="",this.smtpPort=25,this.smtpSsl=!1,this.smtpAuthentication=this.smtpAuthTypeEnum.UseUserCredentials,this.smtpLogin="",this.smtpPassword="",this.enableSieve=!1,this.sievePort=4190,this.useThreading=!0,this.useFullEmail=!0,this.setExternalAccessServers=!1,this.externalAccessImapServer="",this.externalAccessImapPort=143,this.externalAccessImapAlterPort="",this.externalAccessImapUseSsl=!1,this.externalAccessPop3Server="",this.externalAccessPop3Port=110,this.externalAccessPop3AlterPort="",this.externalAccessPop3UseSsl=!1,this.externalAccessSmtpServer="",this.externalAccessSmtpPort=25,this.externalAccessSmtpAlterPort="",this.externalAccessSmtpUseSsl=!1,this.oauthConnector="";else{const e=qe().find(this.servers,(e=>e.id===this.currentServerId));this.showServerFields=!!e,this.showServerFields&&(this.currentServerTenantId=e.tenantId,this.serverName=e.name,this.domains=e.domains,this.imapServer=e.incomingServer,this.imapPort=e.incomingPort,this.imapSsl=e.incomingUseSsl,this.smtpServer=e.outgoingServer,this.smtpPort=e.outgoingPort,this.smtpSsl=e.outgoingUseSsl,this.smtpAuthentication=e.smtpAuthType,this.smtpLogin=e.smtpLogin,this.smtpPassword=e.smtpPassword,this.enableSieve=e.enableSieve,this.sievePort=e.sievePort,this.useThreading=e.enableThreading,this.useFullEmail=e.useFullEmailAddressAsLogin,this.setExternalAccessServers=e.setExternalAccessServers,this.externalAccessImapServer=e.externalAccessImapServer,this.externalAccessImapPort=e.externalAccessImapPort,this.externalAccessImapAlterPort=e.externalAccessImapAlterPort,this.externalAccessImapUseSsl=e.externalAccessImapUseSsl,this.externalAccessPop3Server=e.externalAccessPop3Server,this.externalAccessPop3Port=e.externalAccessPop3Port,this.externalAccessPop3AlterPort=e.externalAccessPop3AlterPort,this.externalAccessPop3UseSsl=e.externalAccessPop3UseSsl,this.externalAccessSmtpServer=e.externalAccessSmtpServer,this.externalAccessSmtpPort=e.externalAccessSmtpPort,this.externalAccessSmtpAlterPort=e.externalAccessSmtpAlterPort,this.externalAccessSmtpUseSsl=e.externalAccessSmtpUseSsl,this.oauthConnector=e.oauthType)}},fillUpSmtpServerFromImapServer(){qe().isEmpty(this.smtpServer)&&(this.smtpServer=this.imapServer)},hasChanges(){if(this.createMode){let e=!1!==this.setExternalAccessServers;return!e&&this.setExternalAccessServers&&(e=""!==this.externalAccessImapServer||143!==this.externalAccessImapPort||""!==this.externalAccessImapAlterPort||!1!==this.externalAccessImapUseSsl||""!==this.externalAccessPop3Server||110!==this.externalAccessPop3Port||""!==this.externalAccessPop3AlterPort||!1!==this.externalAccessPop3UseSsl||""!==this.externalAccessSmtpServer||25!==this.externalAccessSmtpPort||""!==this.externalAccessSmtpAlterPort||!1!==this.externalAccessSmtpUseSsl),""!==this.serverName||""!==this.domains||""!==this.imapServer||143!==this.imapPort||!1!==this.imapSsl||""!==this.smtpServer||25!==this.smtpPort||!1!==this.smtpSsl||this.smtpAuthentication!==this.smtpAuthTypeEnum.UseUserCredentials||""!==this.smtpLogin||""!==this.smtpPassword||!1!==this.enableSieve||4190!==this.sievePort||!0!==this.useThreading||!0!==this.useFullEmail||!1!==this.setExternalAccessServers||e||""!==this.oauthConnector}{const e=this.getServer(this.currentServerId);if(e){let t=e.setExternalAccessServers!==this.setExternalAccessServers;return!t&&this.setExternalAccessServers&&(t=e.externalAccessImapServer!==this.externalAccessImapServer||e.externalAccessImapPort!==this.externalAccessImapPort||e.externalAccessImapAlterPort!==this.externalAccessImapAlterPort||e.externalAccessImapUseSsl!==this.externalAccessImapUseSsl||e.externalAccessPop3Server!==this.externalAccessPop3Server||e.externalAccessPop3Port!==this.externalAccessPop3Port||e.externalAccessPop3AlterPort!==this.externalAccessPop3AlterPort||e.externalAccessPop3UseSsl!==this.externalAccessPop3UseSsl||e.externalAccessSmtpServer!==this.externalAccessSmtpServer||e.externalAccessSmtpPort!==this.externalAccessSmtpPort||e.externalAccessSmtpAlterPort!==this.externalAccessSmtpAlterPort,e.externalAccessSmtpUseSsl,this.externalAccessSmtpUseSsl),e.name!==this.serverName||e.incomingServer!==this.imapServer||e.incomingPort!==this.imapPort||e.incomingUseSsl!==this.imapSsl||e.outgoingServer!==this.smtpServer||e.outgoingPort!==this.smtpPort||e.outgoingUseSsl!==this.smtpSsl||e.domains!==this.domains||e.smtpAuthType!==this.smtpAuthentication||e.smtpLogin!==this.smtpLogin||e.smtpPassword!==this.smtpPassword||e.enableSieve!==this.enableSieve||e.sievePort!==this.sievePort||e.enableThreading!==this.useThreading||e.useFullEmailAddressAsLogin!==this.useFullEmail||t||e.oauthType!==this.oauthConnector}return!1}},revertChanges(){this.populateServer()},getServer(e){return this.servers.find((t=>t.id===e))},updateServer(e){const t=this.getServer(e.ServerId);t&&t.update(e)},getSaveParameters(){const e={Name:this.serverName,IncomingServer:this.imapServer,IncomingPort:this.imapPort,IncomingUseSsl:this.imapSsl,OutgoingServer:this.smtpServer,OutgoingPort:this.smtpPort,OutgoingUseSsl:this.smtpSsl,Domains:this.domains,SmtpAuthType:this.smtpAuthentication,SmtpLogin:this.smtpLogin,SmtpPassword:this.smtpPassword,EnableSieve:this.enableSieve,SievePort:this.sievePort,EnableThreading:this.useThreading,UseFullEmailAddressAsLogin:this.useFullEmail,SetExternalAccessServers:this.setExternalAccessServers,ExternalAccessImapServer:this.externalAccessImapServer,ExternalAccessImapPort:Be.Z.pInt(this.externalAccessImapPort),ExternalAccessImapAlterPort:Be.Z.pInt(this.externalAccessImapAlterPort),ExternalAccessImapUseSsl:Be.Z.pBool(this.externalAccessImapUseSsl),ExternalAccessPop3Server:this.externalAccessPop3Server,ExternalAccessPop3Port:Be.Z.pInt(this.externalAccessPop3Port),ExternalAccessPop3AlterPort:Be.Z.pInt(this.externalAccessPop3AlterPort),ExternalAccessPop3UseSsl:Be.Z.pBool(this.externalAccessPop3UseSsl),ExternalAccessSmtpServer:this.externalAccessSmtpServer,ExternalAccessSmtpPort:Be.Z.pInt(this.externalAccessSmtpPort),ExternalAccessSmtpAlterPort:Be.Z.pInt(this.externalAccessSmtpAlterPort),ExternalAccessSmtpUseSsl:Be.Z.pBool(this.externalAccessSmtpUseSsl)},t=""!==this.oauthConnector,s=t?this.oauthConnectorsData.find((e=>e.type===this.oauthConnector)):null;return s?(e.OAuthEnable=!0,e.OAuthName=s.name,e.OAuthType=s.type,e.OAuthIconUrl=s.iconUrl):(e.OAuthEnable=!1,e.OAuthName="",e.OAuthType="",e.OAuthIconUrl=""),e},isDataValid(){let e="";return qe().isEmpty(qe().trim(this.serverName))?e="serverName":qe().isEmpty(qe().trim(this.imapServer))?e="imapServer":qe().isEmpty(qe().trim(this.imapPort))?e="imapPort":qe().isEmpty(qe().trim(this.smtpServer))?e="smtpServer":qe().isEmpty(qe().trim(this.smtpPort))&&(e="smtpPort"),!!qe().isEmpty(e)||(qe().isFunction(this.$refs[e]?.$el?.focus)&&this.$refs[e].$el.focus(),Ue.Z.showError(this.$t("COREWEBCLIENT.ERROR_REQUIRED_FIELDS_EMPTY")),!1)},save(){if(!this.saving&&this.isDataValid()){this.saving=!0;const e=qe().extend(this.getSaveParameters(),{ServerId:this.currentServerId,TenantId:this.currentServerTenantId});Ve.Z.sendRequest({moduleName:"Mail",methodName:"UpdateServer",parameters:e}).then((t=>{this.saving=!1,!0===t?(this.updateServer(e),this.populateServer(),this.populate(),Ue.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):Ue.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,Ue.Z.showError(ye.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},addNewServer(){this.$router.push("/system/mail-servers/create")},cancelCreate(){this.$router.push("/system/mail-servers")},create(){if(!this.creating&&this.isDataValid()){this.creating=!0;const e=qe().extend(this.getSaveParameters(),{TenantId:this.selectedTenantId});Ve.Z.sendRequest({moduleName:"Mail",methodName:"CreateServer",parameters:e}).then((e=>{this.creating=!1,qe().isSafeInteger(e)?(this.populateServer(),this.populate(),this.$router.push("/system/mail-servers/id/"+e),Ue.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):Ue.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.creating=!1,Ue.Z.showError(ye.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},askDeleteServer(e,t,s){qe().isFunction(this?.$refs?.confirmDialog?.openDialog)&&this.$refs.confirmDialog.openDialog({title:e,message:this.$t("MAILWEBCLIENT.CONFIRM_REMOVE_SERVER"),okHandler:this.deleteServer.bind(this,t,s)})},deleteServer(e,t){this.loadingServers=!0,Ve.Z.sendRequest({moduleName:"Mail",methodName:"DeleteServer",parameters:{ServerId:e,TenantId:t}}).then((e=>{this.loadingServers=!1,!0===e?this.servers.length>1||1===this.selectedPage?this.populate():(this.selectedPage-=1,this.route()):Ue.Z.showError(this.$t("MAILWEBCLIENT.ERROR_DELETE_MAIL_SERVER"))}),(e=>{this.loadingServers=!1,Ue.Z.showError(ye.Z.getTextFromResponse(e,this.$t("MAILWEBCLIENT.ERROR_DELETE_MAIL_SERVER")))}))}}};var ke=s(1639),$e=s(6663),Fe=s(8879),Ge=s(3246),Qe=s(490),He=s(1233),je=s(3115),Ye=s(6611),ze=s(3044),Ke=s(4458),Xe=s(3190),Je=s(8401),et=s(6937),tt=s(1480),st=s(854),lt=s(8289),at=s(9984),rt=s.n(at);const it=(0,ke.Z)(Ze,[["render",Me]]),nt=it;rt()(Ze,"components",{QScrollArea:$e.Z,QBtn:Fe.Z,QList:Ge.Z,QItem:Qe.Z,QItemSection:He.Z,QItemLabel:je.Z,QInput:Ye.Z,QPagination:ze.Z,QCard:Ke.Z,QCardSection:Xe.Z,QSelect:Je.Z,QCheckbox:et.Z,QRadio:tt.Z,QInnerLoading:st.Z,QLinearProgress:lt.Z});const ot={class:"q-pa-lg"},ct={class:"row q-mb-md"},mt={class:"col text-h5"},dt={class:"row q-mb-sm"},pt={class:"col-2"},ht={class:"q-my-sm"},ut={class:"col-4"},St={class:"row"},Et={class:"q-ma-sm col-1",style:{"margin-top":"10px"}},At={class:"row q-mb-sm"},vt=(0,r._)("div",{class:"col-2"},null,-1),It={class:"col-8 q-mb-sm"},Lt={key:0,class:"row"},_t={class:"col-2"},gt={class:"q-my-sm"},Tt={class:"col-4"},wt={class:"row"},bt={class:"q-ma-sm col-1",style:{"margin-top":"10px"}},Pt={key:1,class:"row q-mb-sm"},xt=(0,r._)("div",{class:"col-2"},null,-1),Ct={class:"col-8 q-mt-sm"},Nt={class:"row"},Mt={class:"col-2"},Wt={class:"col-4"},qt={class:"q-mx-sm q-pb-sm col-1"},Rt={class:"q-pt-md text-right"};function yt(e,t,s,l,a,n){const o=(0,r.up)("q-input"),c=(0,r.up)("q-item-label"),m=(0,r.up)("q-card-section"),d=(0,r.up)("q-card"),p=(0,r.up)("q-btn"),h=(0,r.up)("q-linear-progress"),u=(0,r.up)("q-inner-loading"),S=(0,r.up)("q-scroll-area"),E=(0,r.Q2)("t");return(0,r.wg)(),(0,r.j4)(S,{class:"full-height full-width"},{default:(0,r.w5)((()=>[(0,r._)("div",ot,[(0,r._)("div",ct,[(0,r.wy)((0,r._)("div",mt,null,512),[[E,"MAILWEBCLIENT.HEADING_SETTINGS_TAB"]])]),(0,r.Wm)(d,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r._)("div",dt,[(0,r._)("div",pt,[(0,r.wy)((0,r._)("div",ht,null,512),[[E,"MAILWEBCLIENT.LABEL_TENANT_SPACE_LIMIT"]])]),(0,r._)("div",ut,[(0,r._)("div",St,[(0,r.Wm)(o,{outlined:"",dense:"",class:"col-5","bg-color":"white",modelValue:a.tenantSpaceLimitMb,"onUpdate:modelValue":t[0]||(t[0]=e=>a.tenantSpaceLimitMb=e)},null,8,["modelValue"]),(0,r.wy)((0,r._)("div",Et,null,512),[[E,"COREWEBCLIENT.LABEL_MEGABYTES"]])])])]),(0,r._)("div",At,[vt,(0,r._)("div",It,[(0,r.Wm)(c,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("MAILWEBCLIENT.HINT_TENANT_SPACE_LIMIT")),1)])),_:1})])]),a.allowChangeUserSpaceLimit?((0,r.wg)(),(0,r.iD)("div",Lt,[(0,r._)("div",_t,[(0,r.wy)((0,r._)("div",gt,null,512),[[E,"MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT"]])]),(0,r._)("div",Tt,[(0,r._)("div",wt,[(0,r.Wm)(o,{outlined:"",dense:"",class:"col-5","bg-color":"white",modelValue:a.userSpaceLimitMb,"onUpdate:modelValue":t[1]||(t[1]=e=>a.userSpaceLimitMb=e)},null,8,["modelValue"]),(0,r.wy)((0,r._)("div",bt,null,512),[[E,"COREWEBCLIENT.LABEL_MEGABYTES"]])])])])):(0,r.kq)("",!0),a.allowChangeUserSpaceLimit?((0,r.wg)(),(0,r.iD)("div",Pt,[xt,(0,r._)("div",Ct,[(0,r.Wm)(c,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.$t("MAILWEBCLIENT.HINT_USER_SPACE_LIMIT")),1)])),_:1})])])):(0,r.kq)("",!0),(0,r._)("div",Nt,[(0,r.wy)((0,r._)("div",Mt,null,512),[[E,"MAILWEBCLIENT.LABEL_ALLOCATED_TENANT_SPACE"]]),(0,r._)("div",Wt,[(0,r._)("span",null,(0,i.zw)(a.allocatedSpace),1),(0,r.wy)((0,r._)("span",qt,null,512),[[E,"COREWEBCLIENT.LABEL_MEGABYTES"]])])])])),_:1})])),_:1}),(0,r._)("div",Rt,[(0,r.Wm)(p,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE"),onClick:n.save},null,8,["label","onClick"])])]),(0,r.Wm)(u,{style:{"justify-content":"flex-start"},showing:a.loading||a.saving},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{query:""})])),_:1},8,["showing"])])),_:1})}const Ut={name:"MailAdminSettingsPerTenant",data(){return{saving:!1,loading:!1,tenantSpaceLimitMb:"",userSpaceLimitMb:"",allocatedSpace:"",tenant:null,allowChangeUserSpaceLimit:!1}},computed:{tenantId(){return this.$store.getters["tenants/getCurrentTenantId"]}},watch:{"$store.state.tenants.tenants":{handler:function(){this.populate()},deep:!0}},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},mounted(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges(){if(this.loading)return!1;const e=Be.Z.pObject(this.tenant?.completeData),t=e["MailWebclient::TenantSpaceLimitMb"],s=e["MailWebclient::UserSpaceLimitMb"];return Be.Z.pInt(this.tenantSpaceLimitMb)!==t||this.allowChangeUserSpaceLimit&&Be.Z.pInt(this.userSpaceLimitMb)!==s},revertChanges(){const e=Be.Z.pObject(this.tenant?.completeData);this.tenantSpaceLimitMb=e["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=e["MailWebclient::UserSpaceLimitMb"]},populate(){const e=this.$store.getters["tenants/getTenant"](this.tenantId);e&&(void 0!==e.completeData["MailWebclient::TenantSpaceLimitMb"]?(this.loading=!1,this.tenant=e,this.tenantSpaceLimitMb=e.completeData["MailWebclient::TenantSpaceLimitMb"],this.userSpaceLimitMb=e.completeData["MailWebclient::UserSpaceLimitMb"],this.allocatedSpace=e.completeData["MailWebclient::AllocatedSpaceMb"],this.allowChangeUserSpaceLimit=e.completeData["MailWebclient::AllowChangeUserSpaceLimit"]):this.getSettings())},save(){if(!this.saving){this.saving=!0;const e={Type:"Tenant",TenantId:this.tenantId,UserSpaceLimitMb:Be.Z.pInt(this.userSpaceLimitMb),TenantSpaceLimitMb:Be.Z.pInt(this.tenantSpaceLimitMb)};Ve.Z.sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:e}).then((t=>{if(this.saving=!1,!0===t){const t={"MailWebclient::UserSpaceLimitMb":e.UserSpaceLimitMb,"MailWebclient::TenantSpaceLimitMb":e.TenantSpaceLimitMb,"MailWebclient::AllocatedSpaceMb":this.allocatedSpace};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t}),Ue.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else Ue.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,Ue.Z.showError(ye.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings(){this.loading=!0;const e={Type:"Tenant",TenantId:this.tenantId};Ve.Z.sendRequest({moduleName:"Mail",methodName:"GetEntitySpaceLimits",parameters:e}).then((e=>{if(this.loading=!1,e){const t={"MailWebclient::UserSpaceLimitMb":Be.Z.pInt(e.UserSpaceLimitMb),"MailWebclient::TenantSpaceLimitMb":Be.Z.pInt(e.TenantSpaceLimitMb),"MailWebclient::AllocatedSpaceMb":Be.Z.pInt(e.AllocatedSpaceMb),"MailWebclient::AllowChangeUserSpaceLimit":Be.Z.pBool(e.AllowChangeUserSpaceLimit)};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t})}}),(e=>{Ue.Z.showError(ye.Z.getTextFromResponse(e))}))}}},Bt=(0,ke.Z)(Ut,[["render",yt]]),Vt=Bt;rt()(Ut,"components",{QScrollArea:$e.Z,QCard:Ke.Z,QCardSection:Xe.Z,QInput:Ye.Z,QItemLabel:je.Z,QBtn:Fe.Z,QInnerLoading:st.Z,QLinearProgress:lt.Z});const ft={class:"q-pa-lg"},Dt={class:"row q-mb-md"},Ot={class:"col text-h5"},Zt={class:"row"},kt={class:"col-2"},$t={class:"q-my-sm"},Ft={class:"col-4"},Gt={class:"row"},Qt={class:"q-ma-sm col-1"},Ht={class:"q-pt-md text-right"};function jt(e,t,s,l,a,n){const o=(0,r.up)("q-input"),c=(0,r.up)("q-card-section"),m=(0,r.up)("q-card"),d=(0,r.up)("q-btn"),p=(0,r.up)("q-linear-progress"),h=(0,r.up)("q-inner-loading"),u=(0,r.up)("q-scroll-area"),S=(0,r.Q2)("t");return(0,r.wg)(),(0,r.j4)(u,{class:"full-height full-width"},{default:(0,r.w5)((()=>[(0,r._)("div",ft,[(0,r._)("div",Dt,[(0,r._)("div",Ot,(0,i.zw)(e.$t("MAILWEBCLIENT.HEADING_SETTINGS_TAB")),1)]),(0,r.Wm)(m,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r._)("div",Zt,[(0,r._)("div",kt,[(0,r._)("div",$t,(0,i.zw)(e.$t("MAILWEBCLIENT.LABEL_USER_SPACE_LIMIT")),1)]),(0,r._)("div",Ft,[(0,r._)("div",Gt,[(0,r.Wm)(o,{outlined:"",dense:"",class:"col-4","bg-color":"white",modelValue:a.userSpaceLimitMb,"onUpdate:modelValue":t[0]||(t[0]=e=>a.userSpaceLimitMb=e)},null,8,["modelValue"]),(0,r.wy)((0,r._)("div",Qt,null,512),[[S,"COREWEBCLIENT.LABEL_MEGABYTES"]])])])])])),_:1})])),_:1}),(0,r._)("div",Ht,[(0,r.Wm)(d,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE"),onClick:n.updateSettingsForEntity},null,8,["label","onClick"])])]),(0,r.Wm)(h,{style:{"justify-content":"flex-start"},showing:a.loading||a.saving},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{query:""})])),_:1},8,["showing"])])),_:1})}var Yt=s(9706);const zt={name:"MailAdminSettingsPerUser",data(){return{user:null,userSpaceLimitMb:0,loading:!1,saving:!1}},watch:{$route(e,t){this.parseRoute()}},mounted(){this.parseRoute()},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},methods:{hasChanges(){const e=qe().isFunction(this.user?.getData)?this.user?.getData("Mail::UserSpaceLimitMb"):0;return this.userSpaceLimitMb!==e},revertChanges(){const e=qe().isFunction(this.user?.getData)?this.user?.getData("Mail::UserSpaceLimitMb"):0;this.userSpaceLimitMb=e},parseRoute(){const e=Be.Z.pPositiveInt(this.$route?.params?.id);this.user?.id!==e&&(this.user={id:e},this.populate())},populate(){this.loading=!0;const e=this.$store.getters["tenants/getCurrentTenantId"];Yt.Z.getUser(e,this.user.id).then((({user:e,userId:t})=>{t===this.user.id&&(this.loading=!1,e&&qe().isFunction(e?.getData)?(this.user=e,this.userSpaceLimitMb=e.getData("Mail::UserSpaceLimitMb")):this.$emit("no-user-found"))}))},updateSettingsForEntity(){if(!this.saving){this.saving=!0;const e={Type:"User",UserId:this.user?.id,TenantId:this.user.tenantId,UserSpaceLimitMb:Be.Z.pInt(this.userSpaceLimitMb)};Ve.Z.sendRequest({moduleName:"Mail",methodName:"UpdateEntitySpaceLimits",parameters:e}).then((t=>{this.saving=!1,t?(Yt.Z.getUser(e.TenantId,e.EntityId).then((({user:t})=>{t.updateData([{field:"Mail::UserSpaceLimitMb",value:e.UserSpaceLimitMb}]),this.populate()})),Ue.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):Ue.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,Ue.Z.showError(ye.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}},Kt=(0,ke.Z)(zt,[["render",jt]]),Xt=Kt;rt()(zt,"components",{QScrollArea:$e.Z,QCard:Ke.Z,QCardSection:Xe.Z,QInput:Ye.Z,QBtn:Fe.Z,QInnerLoading:st.Z,QLinearProgress:lt.Z});const Jt={moduleName:"MailWebclient",requiredModules:["Mail"],init(e){l.Z.init(e)},getAdminSystemTabs(){return[{tabName:"mail",tabTitle:"MAILWEBCLIENT.LABEL_SETTINGS_TAB",tabRouteChildren:[{path:"mail",component:()=>s.e(735).then(s.bind(s,9735))}]},{tabName:"mail-servers",tabTitle:"MAILWEBCLIENT.LABEL_SERVERS_SETTINGS_TAB",tabRouteChildren:[{path:"mail-servers",component:nt},{path:"mail-servers/id/:id",component:nt},{path:"mail-servers/create",component:nt},{path:"mail-servers/search/:search",component:nt},{path:"mail-servers/search/:search/id/:id",component:nt},{path:"mail-servers/page/:page",component:nt},{path:"mail-servers/page/:page/id/:id",component:nt},{path:"mail-servers/search/:search/page/:page",component:nt},{path:"mail-servers/search/:search/page/:page/id/:id",component:nt}]}]},getAdminUserTabs(){return l.Z.getAllowChangeMailQuotaOnMailServer()?[{tabName:"mail-quota",tabTitle:"MAILWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/mail-quota",component:Xt},{path:"search/:search/id/:id/mail-quota",component:Xt},{path:"page/:page/id/:id/mail-quota",component:Xt},{path:"search/:search/page/:page/id/:id/mail-quota",component:Xt}]}]:[]},getAdminTenantTabs(){const e=a["default"].getters["user/isUserSuperAdmin"];return e?[{tabName:"mail-quota",tabTitle:"MAILWEBCLIENT.HEADING_BROWSER_TAB",tabRouteChildren:[{path:"id/:id/mail-quota",component:Vt},{path:"search/:search/id/:id/mail-quota",component:Vt},{path:"page/:page/id/:id/mail-quota",component:Vt},{path:"search/:search/page/:page/id/:id/mail-quota",component:Vt}]}]:[]}}}}]);