"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[79],{79:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var s=a(9835);const l={class:"q-pa-lg"},o={class:"row q-mb-md"},n={class:"col text-h5"},r={class:"row q-mb-md"},i={class:"row q-mb-md"},d={class:"col-2 q-my-sm q-pl-sm required-field"},u={class:"col-5"},p={class:"row q-mb-md"},c={class:"col-2 q-my-sm q-pl-sm required-field"},h={class:"col-5"},m={class:"row"},E={class:"row q-my-md"},_={class:"row"},b={class:"q-pt-md text-right"};function g(e,t,a,g,S,I){const w=(0,s.up)("q-item-label"),T=(0,s.up)("q-checkbox"),R=(0,s.up)("q-input"),v=(0,s.up)("q-card-section"),O=(0,s.up)("q-card"),N=(0,s.up)("q-btn"),C=(0,s.up)("q-linear-progress"),D=(0,s.up)("q-inner-loading"),q=(0,s.up)("q-scroll-area"),L=(0,s.Q2)("t");return(0,s.wg)(),(0,s.j4)(q,{class:"full-height full-width"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",o,[(0,s.wy)((0,s._)("div",n,null,512),[[L,"DROPBOX.HEADING_SETTINGS"]])]),(0,s.Wm)(O,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s.Wm)(T,{dense:"",modelValue:S.enableDropbox,"onUpdate:modelValue":t[0]||(t[0]=e=>S.enableDropbox=e)},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(w,null,null,512),[[L,"DROPBOX.ENABLE_MODULE"]])])),_:1},8,["modelValue"])]),(0,s._)("div",i,[(0,s.wy)((0,s._)("div",d,null,512),[[L,"OAUTHINTEGRATORWEBCLIENT.LABEL_APP_ID"]]),(0,s._)("div",u,[(0,s.Wm)(R,{outlined:"",dense:"","bg-color":"white",modelValue:S.appId,"onUpdate:modelValue":t[1]||(t[1]=e=>S.appId=e)},null,8,["modelValue"])])]),(0,s._)("div",p,[(0,s.wy)((0,s._)("div",c,null,512),[[L,"OAUTHINTEGRATORWEBCLIENT.LABEL_APP_SECRET"]]),(0,s._)("div",h,[(0,s.Wm)(R,{outlined:"",dense:"","bg-color":"white",modelValue:S.appSecret,"onUpdate:modelValue":t[2]||(t[2]=e=>S.appSecret=e)},null,8,["modelValue"])])]),(0,s._)("div",m,[(0,s.Wm)(w,{caption:""},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("span",null,null,512),[[L,"DROPBOX.INFO_SETTINGS"]])])),_:1})]),(0,s._)("div",E,[(0,s.Wm)(T,{dense:"",modelValue:S.auth,"onUpdate:modelValue":t[3]||(t[3]=e=>S.auth=e)},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(w,null,null,512),[[L,"DROPBOXAUTHWEBCLIENT.SCOPE_AUTH"]])])),_:1},8,["modelValue"])]),(0,s._)("div",_,[(0,s.Wm)(T,{dense:"",modelValue:S.storage,"onUpdate:modelValue":t[4]||(t[4]=e=>S.storage=e)},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(w,null,null,512),[[L,"DROPBOXFILESTORAGE.SCOPE_FILESTORAGE"]])])),_:1},8,["modelValue"])])])),_:1})])),_:1}),(0,s._)("div",b,[(0,s.Wm)(N,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:I.saveDropboxSettings,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])]),(0,s.Wm)(D,{style:{"justify-content":"flex-start"},showing:S.saving},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{query:""})])),_:1},8,["showing"])])),_:1})}var S=a(9336),I=a(1427),w=a(2456),T=a(4883);const R={name:"DropboxAdminSettings",data(){return{saving:!1,enableDropbox:!1,appSecret:"",appId:"",auth:!1,storage:!1}},mounted(){this.populate()},beforeRouteLeave(e,t,a){this.$root.doBeforeRouteLeave(e,t,a)},methods:{hasChanges(){const e=T.Z.getDropboxSettings();let t=!1;return this.scopes.forEach((e=>{t||("auth"===e.Name?t=this.auth!==e.Value:"storage"===e.Name&&(t=this.storage!==e.Value))})),this.enableDropbox!==e.enableModule||this.appId!==e.id||t||this.appSecret!==e.secret},revertChanges(){this.populate()},saveDropboxSettings(){this.appId&&this.appSecret||!this.enableDropbox?this.save():I.Z.showError(this.$t("COREWEBCLIENT.ERROR_REQUIRED_FIELDS_EMPTY"))},populate(){const e=T.Z.getDropboxSettings();this.enableDropbox=e.enableModule,this.appId=e.id,this.scopes=e.scopes,this.appSecret=e.secret,this.scopes.forEach((e=>{"auth"===e.Name?this.auth=e.Value:"storage"===e.Name&&(this.storage=e.Value)}))},save(){if(!this.saving){this.saving=!0,this.scopes.forEach((e=>{"auth"===e.Name?e.Value=this.auth:"storage"===e.Name&&(e.Value=this.storage)}));const e={EnableModule:this.enableDropbox,Id:this.appId,Secret:this.appSecret,Scopes:this.scopes};w.Z.sendRequest({moduleName:"Dropbox",methodName:"UpdateSettings",parameters:e}).then((t=>{this.saving=!1,!0===t?(T.Z.saveDropboxSettings(e),this.populate(),I.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):I.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,I.Z.showError(S.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}};var v=a(1639),O=a(6663),N=a(4458),C=a(3190),D=a(6937),q=a(3115),L=a(6611),V=a(8879),f=a(854),A=a(8289),W=a(9984),x=a.n(W);const Z=(0,v.Z)(R,[["render",g]]),B=Z;x()(R,"components",{QScrollArea:O.Z,QCard:N.Z,QCardSection:C.Z,QCheckbox:D.Z,QItemLabel:q.Z,QInput:L.Z,QBtn:V.Z,QInnerLoading:f.Z,QLinearProgress:A.Z})}}]);